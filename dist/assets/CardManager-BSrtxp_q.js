import{u as Fe,j as e,a as Je,d as T,b as ue,c as ge,g as kt,t as V,L as St,s as zt}from"./index-CfQ45Kvu.js";import{r as a,R as et,A as wt,C as tt,X as it,Y as nt,T as ot,a as Ct,b as Qe,L as Pt,c as Wt,d as Rt}from"./vendor-charts-mg27ZyhM.js";import{h as J,y as Be,q as ke,l as rt,o as at,w as le,m as je,z as It,k as K,u as ve,j as Dt,A as st,B as _e,F as Tt,H as At,I as $t,J as Bt,K as Y,M as Ft}from"./vendor-firebase-DyYL8sSK.js";import"./vendor-react-Bzgz95E1.js";function Ze({onImportComplete:s}){const l=a.useRef(null),j=Fe(),[n,B]=a.useState(()=>window.innerWidth>=768);a.useEffect(()=>{const m=()=>B(window.innerWidth>=768);return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);const g=async m=>{const v=m.replace(/^\uFEFF/,"").split(/\r?\n/).map(p=>p.trim()).filter(Boolean);if(!v.length)throw new Error("Pr√°zdny s√∫bor");const z=m.includes(";")?";":",",W=/^polo≈æka$/i.test(v[0])?1:0,P=[];for(let p=W;p<v.length;p++){const y=v[p].split(z)[0].replace(/^"|"$/g,"").trim();y&&y.length>0&&P.push(y)}return P},E=async m=>{const v=m.target.files?.[0];if(v)try{const z=await v.text(),F=await g(z);if(F.length===0){j.warning("V s√∫bore neboli n√°jden√© ≈æiadne polo≈æky.");return}const W=Je.currentUser;if(!W){j.error("Mus√≠≈° by≈• prihl√°sen√Ω!");return}let P=0;const p=J(T,"cards");for(const D of F)await Be(p,{userId:W.uid,item:D,buy:null,current:null,status:"zbierka",quantity:1,isPublic:!1,note:"",imageUrl:null,imageName:null,createdAt:new Date}),P++;j.success(`Import hotov√Ω! Pridan√Ωch polo≈æiek: ${P}`),s&&s()}catch(z){console.error("Chyba pri importe:",z),j.error("Chyba pri importe: "+z.message)}finally{m.target.value=""}};return e.jsxs("label",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"10px 16px",minHeight:"44px",height:"100%",width:"100%",boxSizing:"border-box",backgroundColor:"#f3e8ff",color:"#6b21a8",border:"1px solid #e9d5ff",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s",whiteSpace:"normal"},onMouseOver:m=>m.currentTarget.style.backgroundColor="#e9d5ff",onMouseOut:m=>m.currentTarget.style.backgroundColor="#f3e8ff",children:["üìä ",n&&e.jsx("span",{children:"Import z "}),"CSV",e.jsx("input",{ref:l,type:"file",accept:".csv,text/csv",onChange:E,style:{display:"none"}})]})}function Lt({user:s,darkMode:l,onClose:j,isMockAuth:n=!1,mockNotifications:B=[]}){const g=Fe(),{formatCurrency:E}=ue(),{language:m}=ge(),[v,z]=a.useState([]),[F,W]=a.useState(0);a.useEffect(()=>{if(n){z(B),W(B.length);return}if(!s)return;const i=ke(J(T,"notifications"),le("userId","==",s.uid),le("read","==",!1),at("createdAt","desc"),rt(10)),h=je(i,q=>{const A=q.docs.map(k=>({id:k.id,...k.data()}));z(A),W(A.length)});return()=>h()},[s]);const P=async i=>{try{await ve(K(T,"notifications",i),{read:!0})}catch(h){console.error("Error marking notification as read:",h)}},p=async()=>{try{const i=It(T);v.forEach(h=>{i.update(K(T,"notifications",h.id),{read:!0})}),await i.commit()}catch(i){console.error("Error marking all as read:",i)}},D=i=>{if(!i)return"";const h=i.toDate(),A=new Date-h,k=Math.floor(A/6e4),X=Math.floor(A/36e5),d=Math.floor(A/864e5);return k<1?"Teraz":k<60?`pred ${k} min`:X<24?`pred ${X} h`:d<7?`pred ${d} d≈àami`:h.toLocaleDateString("sk-SK")},y=async i=>{await P(i.id),i.actionType==="view_log"&&(console.log("View log:",i.actionData),g.info(`Update detail:
‚úÖ √öspe≈°ne: ${i.actionData.successCount}
‚ùå Ne√∫spe≈°ne: ${i.actionData.failCount}
üí∞ Celkov√° hodnota: ${E(i.actionData.totalValue,m)}`,8e3))};return e.jsxs("div",{style:{position:"fixed",top:0,right:0,width:"100%",maxWidth:"400px",height:"100vh",background:l?"#1e293b":"white",boxShadow:"-4px 0 20px rgba(0,0,0,0.2)",zIndex:9999,overflowY:"auto",padding:"20px",paddingTop:"max(20px, env(safe-area-inset-top, 20px))",paddingBottom:"max(20px, env(safe-area-inset-bottom, 20px))",paddingRight:"max(20px, env(safe-area-inset-right, 20px))",animation:"slideInRight 0.3s ease-out"},children:[e.jsx("style",{children:`
          @keyframes slideInRight {
            from {
              transform: translateX(100%);
            }
            to {
              transform: translateX(0);
            }
          }
        `}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"16px",borderBottom:`2px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"bold"},children:"üîî Notifik√°cie"}),F>0&&e.jsxs("span",{style:{fontSize:"13px",color:"#64748b"},children:[F," ",F===1?"nov√°":"nov√©"]})]}),e.jsx("button",{onClick:j,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",padding:"4px 8px",color:l?"#f8fafc":"#0f172a"},children:"‚úï"})]}),v.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#64748b"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"üì≠"}),e.jsx("p",{style:{margin:0},children:"≈Ωiadne nov√© notifik√°cie"})]}):e.jsxs(e.Fragment,{children:[v.map(i=>e.jsx("div",{style:{padding:"16px",background:l?"#334155":"#f8fafc",borderRadius:"12px",marginBottom:"12px",cursor:"pointer",border:`2px solid ${l?"#475569":"#e2e8f0"}`,transition:"all 0.2s"},onClick:()=>y(i),onMouseEnter:h=>{h.currentTarget.style.borderColor="#667eea",h.currentTarget.style.transform="translateX(-4px)"},onMouseLeave:h=>{h.currentTarget.style.borderColor=l?"#475569":"#e2e8f0",h.currentTarget.style.transform="translateX(0)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[e.jsxs("div",{style:{fontSize:"24px",flexShrink:0},children:[i.type==="price_update_complete"&&"‚úÖ",i.type==="price_update_failed"&&"‚ùå",i.type==="system"&&"‚ÑπÔ∏è"]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"4px",fontSize:"15px"},children:i.title}),e.jsx("div",{style:{fontSize:"14px",color:l?"#cbd5e1":"#64748b",lineHeight:"1.5"},children:i.message}),e.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",marginTop:"8px"},children:D(i.createdAt)})]})]})},i.id)),v.length>0&&e.jsx("button",{onClick:p,style:{width:"100%",padding:"12px",marginTop:"16px",background:l?"#334155":"#f3f4f6",color:l?"#f8fafc":"#0f172a",border:`1px solid ${l?"#475569":"#d1d5db"}`,borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},onMouseEnter:i=>{i.target.style.background=l?"#475569":"#e5e7eb"},onMouseLeave:i=>{i.target.style.background=l?"#334155":"#f3f4f6"},children:"Oznaƒçi≈• v≈°etky ako preƒç√≠tan√©"})]})]})}const $e=[{key:"1Y",label:"1 rok",months:12},{key:"2Y",label:"2 roky",months:24},{key:"5Y",label:"5 rokov",months:60},{key:"10Y",label:"10 rokov",months:120},{key:"ALL",label:"V≈°etko",months:null}];function Ut({user:s,darkMode:l=!1,isMockAuth:j=!1}){const[n,B]=a.useState([]),[g,E]=a.useState(!0),[m,v]=a.useState("ALL"),[z,F]=a.useState([]),{formatCurrency:W,formatCurrencyCompact:P}=ue(),{language:p}=ge();a.useEffect(()=>{if(j){const w=new Date,S=[{date:new Date(w.getFullYear(),0,15),hodnota:120,pocetPoloziek:2},{date:new Date(w.getFullYear(),1,15),hodnota:150,pocetPoloziek:3},{date:new Date(w.getFullYear(),2,15),hodnota:180,pocetPoloziek:3},{date:new Date(w.getFullYear(),3,15),hodnota:210,pocetPoloziek:4}];B(S),F([{id:"mock-1",status:"zbierka",buy:180,current:320,quantity:2},{id:"mock-2",status:"zbierka",buy:25,current:40,quantity:1},{id:"mock-3",status:"predan√°",buy:210,soldPrice:295,quantity:1},{id:"mock-4",status:"zbierka",buy:8,current:12,quantity:3}]),E(!1);return}if(!s)return;(async()=>{E(!0);try{const w=J(T,"cards"),S=ke(w,le("userId","==",s.uid)),O=(await Dt(S)).docs.map(f=>({id:f.id,...f.data()}));F(O);const H=[];O.forEach(f=>{const o=f.quantity||1;if(f.createdAt){const u=f.createdAt.toDate?f.createdAt.toDate():new Date(f.createdAt);H.push({date:u,cardId:f.id,type:"purchase",price:(f.buy||0)*o,cardName:f.item})}if(f.priceHistory&&f.priceHistory.length>0&&f.priceHistory.forEach(u=>{const _=u.date?.toDate?u.date.toDate():new Date(u.date);H.push({date:_,cardId:f.id,type:"priceUpdate",price:u.price*o,cardName:f.item})}),f.status==="predan√°"&&f.soldAt){const u=f.soldAt.toDate?f.soldAt.toDate():new Date(f.soldAt);H.push({date:u,cardId:f.id,type:"sale",price:(f.soldPrice||f.current||0)*o,cardName:f.item})}}),H.sort((f,o)=>f.date-o.date);const L=new Map,Q=[],b=new Map;H.forEach(f=>{const o=f.date.toISOString().split("T")[0];b.has(o)||b.set(o,{date:f.date,events:[]}),b.get(o).events.push(f)}),b.forEach((f,o)=>{const u=[],_=[];f.events.forEach($=>{if($.type==="purchase")L.set($.cardId,{price:$.price,sold:!1}),u.push($.cardName);else if($.type==="priceUpdate"){if(L.has($.cardId)){const M=L.get($.cardId);M.sold||(M.price=$.price)}}else $.type==="sale"&&(L.has($.cardId)&&(L.get($.cardId).sold=!0),_.push($.cardName))});let ce=0,ee=0;L.forEach($=>{$.sold||(ce+=$.price,ee++)}),Q.push({date:f.date,dateKey:o,hodnota:parseFloat(ce.toFixed(2)),pocetPoloziek:ee,purchases:u.length>0?u:null,sales:_.length>0?_:null,hasPurchase:u.length>0,hasSale:_.length>0})}),B(Q)}catch(w){console.error("Error loading portfolio history:",w)}finally{E(!1)}})()},[s]);const D=a.useMemo(()=>{if(n.length===0)return[];const d=$e.find(S=>S.key===m);if(!d||d.months===null)return n;const w=new Date;return w.setMonth(w.getMonth()-d.months),n.filter(S=>S.date>=w)},[n,m]),y=a.useMemo(()=>D.map(d=>({...d,dateFormatted:d.date.toLocaleDateString("sk-SK",{day:"2-digit",month:"short",year:"numeric"}),timestamp:d.date.getTime()})),[D]),i=a.useMemo(()=>{if(y.length===0)return{currentValue:0,initialValue:0,change:0,changePercent:0,cardCount:0,totalInvested:0,totalSold:0,realizedProfit:0};const d=y[0],w=y[y.length-1],S=w.hodnota-d.hodnota,de=d.hodnota>0?S/d.hodnota*100:0,O=z.filter(o=>o.status==="zbierka"),H=z.filter(o=>o.status==="predan√°"),L=z.reduce((o,u)=>o+(parseFloat(u.buy)||0)*(u.quantity||1),0),Q=H.reduce((o,u)=>o+(parseFloat(u.soldPrice)||0)*(u.quantity||1),0),b=H.reduce((o,u)=>o+(parseFloat(u.buy)||0)*(u.quantity||1),0),f=Q-b;return{currentValue:w.hodnota,initialValue:d.hodnota,change:S,changePercent:de,cardCount:O.reduce((o,u)=>o+(u.quantity||1),0),totalInvested:L,totalSold:Q,realizedProfit:f,soldCount:H.reduce((o,u)=>o+(u.quantity||1),0)}},[y,z]);if(g)return e.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",background:l?"#1e293b":"#f8fafc",borderRadius:"12px",border:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:"‚è≥"}),e.jsx("p",{style:{margin:0,fontSize:"14px",color:l?"#94a3b8":"#64748b"},children:"Naƒç√≠tavam hist√≥riu portf√≥lia..."})]});if(y.length===0)return e.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:l?"#94a3b8":"#64748b",background:l?"#1e293b":"#f8fafc",borderRadius:"12px",border:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"üìà"}),e.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"16px",fontWeight:"500"},children:"≈Ωiadne historick√© d√°ta"}),e.jsx("p",{style:{margin:0,fontSize:"13px",color:"#94a3b8"},children:"Pridaj karty do zbierky a sleduj v√Ωvoj hodnoty portf√≥lia"})]});const h=i.change>=0,q=h?"#10b981":"#ef4444",A=l?"#334155":"#e2e8f0",k=l?"#cbd5e1":"#475569",X=({active:d,payload:w})=>{if(!d||!w||!w.length)return null;const S=w[0].payload;return e.jsxs("div",{style:{background:l?"#334155":"white",border:`1px solid ${l?"#475569":"#e2e8f0"}`,borderRadius:"8px",padding:"12px",fontSize:"13px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"8px",color:k},children:S.dateFormatted}),e.jsx("div",{style:{color:l?"#f8fafc":"#0f172a",fontWeight:"600",fontSize:"16px"},children:W(S.hodnota,p)}),e.jsxs("div",{style:{color:"#94a3b8",fontSize:"12px",marginTop:"4px"},children:[S.pocetPoloziek," polo≈æiek v zbierke"]}),S.purchases&&e.jsxs("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:`1px solid ${A}`},children:[e.jsx("span",{style:{color:"#10b981"},children:"+ N√°kup:"}),e.jsxs("div",{style:{fontSize:"11px",color:"#94a3b8"},children:[S.purchases.slice(0,2).join(", "),S.purchases.length>2&&` +${S.purchases.length-2} ƒèal≈°√≠ch`]})]}),S.sales&&e.jsxs("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:`1px solid ${A}`},children:[e.jsx("span",{style:{color:"#ef4444"},children:"‚àí Predaj:"}),e.jsxs("div",{style:{fontSize:"11px",color:"#94a3b8"},children:[S.sales.slice(0,2).join(", "),S.sales.length>2&&` +${S.sales.length-2} ƒèal≈°√≠ch`]})]})]})};return e.jsxs("div",{style:{background:l?"#1e293b":"white",borderRadius:"12px",padding:"20px",border:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsxs("div",{style:{marginBottom:"20px",paddingBottom:"16px",borderBottom:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginBottom:"16px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"üìä Investiƒçn√© portf√≥lio"}),e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:$e.map(d=>e.jsx("button",{onClick:()=>v(d.key),style:{padding:"6px 12px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"12px",fontWeight:"500",transition:"all 0.2s",background:m===d.key?"#667eea":l?"#334155":"#f1f5f9",color:m===d.key?"white":l?"#94a3b8":"#64748b"},children:d.label},d.key))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"Hodnota zbierky"}),e.jsx("div",{style:{fontSize:"22px",fontWeight:"bold",color:l?"#f8fafc":"#0f172a"},children:W(i.currentValue,p)})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:["Zmena (",$e.find(d=>d.key===m)?.label,")"]}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:h?"#10b981":"#ef4444"},children:[h?"+":"",W(i.change,p),e.jsxs("span",{style:{fontSize:"12px",marginLeft:"4px"},children:["(",h?"+":"",i.changePercent.toFixed(1),"%)"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"V zbierke"}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:"#667eea"},children:[i.cardCount," ks"]})]}),i.soldCount>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"Realizovan√Ω zisk"}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:i.realizedProfit>=0?"#10b981":"#ef4444"},children:[i.realizedProfit>=0?"+":"",W(i.realizedProfit,p)]})]})]})]}),e.jsx(et,{width:"100%",height:300,children:e.jsxs(wt,{data:y,margin:{top:10,right:20,left:0,bottom:5},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:q,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:q,stopOpacity:0})]})}),e.jsx(tt,{strokeDasharray:"3 3",stroke:A}),e.jsx(it,{dataKey:"dateFormatted",stroke:k,style:{fontSize:"10px"},tick:{fill:k},interval:"preserveStartEnd"}),e.jsx(nt,{stroke:k,style:{fontSize:"11px"},tick:{fill:k},tickFormatter:d=>P(d,p)}),e.jsx(ot,{content:e.jsx(X,{})}),e.jsx(Ct,{type:"monotone",dataKey:"hodnota",stroke:q,strokeWidth:2,fillOpacity:1,fill:"url(#colorValue)"}),y.filter(d=>d.hasPurchase).map((d,w)=>e.jsx(Qe,{x:d.dateFormatted,y:d.hodnota,r:5,fill:"#10b981",stroke:"white",strokeWidth:2},`purchase-${w}`)),y.filter(d=>d.hasSale).map((d,w)=>e.jsx(Qe,{x:d.dateFormatted,y:d.hodnota,r:5,fill:"#ef4444",stroke:"white",strokeWidth:2},`sale-${w}`))]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"20px",marginTop:"12px",fontSize:"12px",color:"#94a3b8"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#10b981"}}),"N√°kup"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#ef4444"}}),"Predaj"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"12px",marginTop:"16px",paddingTop:"16px",borderTop:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"Celkom investovan√©"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:W(i.totalInvested,p)})]}),i.soldCount>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:["Predan√© (",i.soldCount," ks)"]}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:W(i.totalSold,p)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"Priem. cena karty"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:W(i.cardCount>0?i.currentValue/i.cardCount:0,p)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"Z√°znamov"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:y.length})]})]})]})}function Xe({priceHistory:s=[],darkMode:l=!1}){const{t:j,language:n}=ge(),{currency:B,formatCurrency:g,formatCurrencyCompact:E}=ue();if(!s||s.length===0)return e.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:l?"#94a3b8":"#64748b",background:l?"#1e293b":"#f8fafc",borderRadius:"12px",border:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:"üìä"}),e.jsx("p",{style:{margin:0,fontSize:"14px"},children:j("chart.noData")}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"12px",color:"#94a3b8"},children:j("chart.noDataHint")})]});const m=n==="en"?"en-GB":n==="cz"?"cs-CZ":"sk-SK",v=s.map(h=>{const q=h.date?.toDate?h.date.toDate():new Date(h.date);return{date:q.toLocaleDateString(m,{day:"2-digit",month:"short",year:"numeric"}),cena:h.price,timestamp:q.getTime()}}).sort((h,q)=>h.timestamp-q.timestamp),z=v[0]?.cena||0,W=(v[v.length-1]?.cena||0)-z,P=z>0?(W/z*100).toFixed(1):0,p=W>=0,D=p?"#10b981":"#ef4444",y=l?"#334155":"#e2e8f0",i=l?"#cbd5e1":"#475569";return e.jsxs("div",{style:{background:l?"#1e293b":"white",borderRadius:"12px",padding:"20px",border:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"16px",borderBottom:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"16px",fontWeight:"600"},children:j("chart.title")}),e.jsxs("p",{style:{margin:0,fontSize:"12px",color:"#94a3b8"},children:[v.length," ",j("chart.records")]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:p?"#10b981":"#ef4444",marginBottom:"4px"},children:[p?"+":"",g(W,n)]}),e.jsxs("div",{style:{fontSize:"13px",color:p?"#10b981":"#ef4444",fontWeight:"500"},children:[p?"+":"",P,"%"]})]})]}),e.jsx(et,{width:"100%",height:250,children:e.jsxs(Pt,{data:v,margin:{top:5,right:20,left:0,bottom:5},children:[e.jsx(tt,{strokeDasharray:"3 3",stroke:y}),e.jsx(it,{dataKey:"date",stroke:i,style:{fontSize:"11px"},tick:{fill:i}}),e.jsx(nt,{stroke:i,style:{fontSize:"11px"},tick:{fill:i},tickFormatter:h=>E(h,n)}),e.jsx(ot,{contentStyle:{background:l?"#334155":"white",border:`1px solid ${l?"#475569":"#e2e8f0"}`,borderRadius:"8px",fontSize:"13px"},labelStyle:{color:i,fontWeight:"600"},formatter:h=>[g(h,n),j("chart.price")]}),e.jsx(Wt,{wrapperStyle:{fontSize:"12px"},iconType:"line"}),e.jsx(Rt,{type:"monotone",dataKey:"cena",stroke:D,strokeWidth:2,dot:{fill:D,r:4},activeDot:{r:6},name:`${j("chart.priceLabel")} (${B})`})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginTop:"16px",paddingTop:"16px",borderTop:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"Minimum"}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#ef4444"},children:g(Math.min(...v.map(h=>h.cena)),n)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"Maximum"}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#10b981"},children:g(Math.max(...v.map(h=>h.cena)),n)})]})]})]})}function Et({user:s,isOpen:l,onClose:j,onUpdate:n,isMockAuth:B=!1}){const[g,E]=a.useState(s.displayName||""),[m,v]=a.useState(s.photoURL||""),[z,F]=a.useState(!1),[W,P]=a.useState(null),p=kt(),D=async()=>{if(!g.trim()){P(V("profile.error.empty",p));return}if(B){n({displayName:g.trim(),photoURL:m.trim()}),j();return}F(!0),P(null);try{const y=K(T,"users",s.uid);await st(y,{displayName:g.trim(),photoURL:m.trim()||null,email:s.email,updatedAt:new Date,createdAt:new Date},{merge:!0}),console.log("Profile saved successfully"),n({displayName:g.trim(),photoURL:m.trim()}),j()}catch(y){console.error("Error saving profile:",y),P(`${p==="en"?"Failed to save profile":p==="cz"?"Nepoda≈ôilo se ulo≈æit profil":"Nepodarilo sa ulo≈æi≈• profil"}: ${y.message}`)}finally{F(!1)}};return l?e.jsx("div",{style:C.overlay,onClick:j,children:e.jsxs("div",{style:C.modal,onClick:y=>y.stopPropagation(),children:[e.jsxs("div",{style:C.header,children:[e.jsxs("h2",{style:C.title,children:["‚úèÔ∏è ",V("profile.title",p)]}),e.jsx("button",{onClick:j,style:C.closeButton,children:"‚úï"})]}),e.jsxs("div",{style:C.content,children:[e.jsxs("div",{style:C.field,children:[e.jsxs("label",{style:C.label,children:[V("profile.name",p)," ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:g,onChange:y=>E(y.target.value),placeholder:p==="en"?"Enter name":p==="cz"?"Zadejte jm√©no":"Zadaj meno",style:C.input,maxLength:50}),e.jsx("div",{style:C.hint,children:V("profile.name.hint",p)})]}),e.jsxs("div",{style:C.field,children:[e.jsx("label",{style:C.label,children:V("profile.photo",p)}),e.jsx("input",{type:"url",value:m,onChange:y=>v(y.target.value),placeholder:"https://example.com/avatar.jpg",style:C.input}),e.jsx("div",{style:C.hint,children:V("profile.photo.hint",p)})]}),(g||m)&&e.jsxs("div",{style:C.preview,children:[e.jsx("div",{style:C.previewLabel,children:V("profile.preview",p)}),e.jsxs("div",{style:C.previewCard,children:[e.jsxs("div",{style:C.avatar,children:[m?e.jsx("img",{src:m,alt:g,style:C.avatarImage,onError:y=>{y.target.style.display="none",y.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{style:{...C.avatarPlaceholder,display:m?"none":"flex"},children:g.charAt(0).toUpperCase()})]}),e.jsx("div",{style:C.previewName,children:g||"Anonym"})]})]}),W&&e.jsxs("div",{style:C.error,children:["‚ùå ",W]})]}),e.jsxs("div",{style:C.footer,children:[e.jsx("button",{onClick:j,style:C.cancelButton,disabled:z,children:V("profile.cancel",p)}),e.jsx("button",{onClick:D,style:C.saveButton,disabled:z,children:z?`‚è≥ ${V("profile.saving",p)}`:`üíæ ${V("profile.save",p)}`})]})]})}):null}const C={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},modal:{background:"white",borderRadius:"16px",maxWidth:"500px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 24px",borderBottom:"1px solid #e2e8f0"},title:{margin:0,fontSize:"20px",fontWeight:"700",color:"#0f172a"},closeButton:{background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s"},content:{padding:"24px"},field:{marginBottom:"20px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:"#0f172a",marginBottom:"8px"},input:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",transition:"border-color 0.2s",boxSizing:"border-box"},hint:{fontSize:"12px",color:"#64748b",marginTop:"6px"},preview:{marginTop:"24px",padding:"16px",background:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},previewLabel:{fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px"},previewCard:{display:"flex",alignItems:"center",gap:"12px"},avatar:{width:"50px",height:"50px",borderRadius:"50%",overflow:"hidden",border:"2px solid #e2e8f0",position:"relative"},avatarImage:{width:"100%",height:"100%",objectFit:"cover"},avatarPlaceholder:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontSize:"20px",fontWeight:"700"},previewName:{fontSize:"16px",fontWeight:"600",color:"#0f172a"},error:{padding:"12px",background:"#fee2e2",color:"#991b1b",borderRadius:"8px",fontSize:"14px",marginTop:"16px"},footer:{display:"flex",gap:"12px",padding:"20px 24px",borderTop:"1px solid #e2e8f0"},cancelButton:{flex:1,padding:"12px 24px",background:"#f1f5f9",color:"#475569",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},saveButton:{flex:1,padding:"12px 24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"}};function qt({darkMode:s}){const{currency:l,setCurrency:j}=ue(),{t:n}=ge(),B=[{code:"EUR",label:"EUR ‚Ç¨"},{code:"USD",label:"USD $"},{code:"CZK",label:"CZK Kƒç"}];return e.jsx("div",{style:Ge.container,children:e.jsx("select",{value:l,onChange:g=>j(g.target.value),style:{...Ge.select,background:s?"#334155":"white",color:s?"white":"#0f172a",borderColor:s?"#475569":"#e2e8f0",width:"74px",paddingRight:"6px"},title:n("currency.switcher"),children:B.map(g=>e.jsx("option",{value:g.code,children:g.label},g.code))})})}const Ge={container:{display:"inline-block"},select:{padding:"8px 10px",borderRadius:"8px",border:"1px solid",fontSize:"12px",fontFamily:"inherit",cursor:"pointer",transition:"all 0.2s",minWidth:"44px",height:"44px"}};function Ot({user:s}){const j=Fe(),{t:n,language:B}=ge(),{currency:g,formatCurrency:E,formatCurrencyCompact:m,convertFromEur:v,convertToEur:z}=ue(),F=[{id:"mock-notif-1",type:"system",title:"Mock notifik√°cia",message:"Testovac√≠ z√°znam pre E2E.",createdAt:{toDate:()=>new Date(Date.now()-1e3*60*60)}}],W=()=>`mock-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,[P,p]=a.useState([]),[D,y]=a.useState([]),[i,h]=a.useState(()=>localStorage.getItem("darkMode")==="true"),[q,A]=a.useState(!1),[k,X]=a.useState(null),[d,w]=a.useState(""),[S,de]=a.useState("all"),[O,H]=a.useState(!1),[L,Q]=a.useState(()=>window.innerWidth>=768?"table":"list"),[b,f]=a.useState(()=>window.innerWidth>=768),[o,u]=a.useState({item:"",buy:"",current:"",status:"zbierka",note:"",imageFile:null,imageUrl:"",soldPrice:"",quantity:"1",isPublic:!1}),[_,ce]=a.useState(!1),[ee,$]=a.useState(0),[M,Le]=a.useState(!1),[pe,lt]=a.useState(null),[Ue,Se]=a.useState(!1),[dt,xe]=a.useState(!1),[R,Ee]=a.useState(null),[te,ze]=a.useState(""),[we,Ce]=a.useState("1"),[qe,he]=a.useState(null),[ct,fe]=a.useState(!1),[Z,Ne]=a.useState(null),[ie,He]=a.useState({displayName:s.displayName,photoURL:s.photoURL}),[pt,xt]=a.useState("standard"),[be,ft]=a.useState(!0),[Pe,ut]=a.useState(!0);a.useEffect(()=>{localStorage.setItem("darkMode",i)},[i]),a.useEffect(()=>{const t=()=>{const r=window.innerWidth>=768;f(r)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),a.useEffect(()=>{if(!s)return;(async()=>{try{const r=await _e(K(T,"users",s.uid));if(r.exists()){const x=r.data();xt(x.role||"standard")}}catch(r){console.error("Error loading user data:",r)}})()},[s]),a.useEffect(()=>{if(!s)return;const t=ke(J(T,"cards"),le("userId","==",s.uid)),r=je(t,x=>{const U=x.docs.map(N=>({id:N.id,...N.data()}));p(U)});return()=>r()},[s]),a.useEffect(()=>{},[!1]),a.useEffect(()=>{if(!s)return;const t=ke(J(T,"notifications"),le("userId","==",s.uid),le("read","==",!1),at("createdAt","desc"),rt(10)),r=je(t,x=>{$(x.size)});return()=>r()},[s]),a.useEffect(()=>{if(!s)return;(async()=>{const U=K(T,"users",s.uid);(await _e(U)).exists()||(console.log("Creating user document for:",s.uid),await st(U,{email:s.email,displayName:s.displayName||s.email?.split("@")[0]||"Anonym",photoURL:s.photoURL||null,createdAt:new Date,updatedAt:new Date}))})();const r=K(T,"users",s.uid),x=je(r,U=>{if(U.exists()){const N=U.data();He({displayName:N.displayName||s.displayName||"Anonym",photoURL:N.photoURL||s.photoURL||null})}});return()=>x()},[s]),a.useEffect(()=>{let t=P;if(d){const r=d.toLowerCase();t=t.filter(x=>(x.item||"").toLowerCase().includes(r)||(x.note||"").toLowerCase().includes(r)||(x.status||"").toLowerCase().includes(r))}S!=="all"&&(t=t.filter(r=>r.status===S)),O&&(t=t.filter(r=>r.imageUrl)),y(t)},[P,d,S,O]);const We=P.filter(t=>t.status==="zbierka"),Re=P.filter(t=>t.status==="predan√°"),ne=t=>t.quantity||1,gt=We.reduce((t,r)=>t+(parseFloat(r.buy)||0)*ne(r),0),Ie=We.reduce((t,r)=>t+(parseFloat(r.current)||0)*ne(r),0),oe=Ie-gt,re=Re.reduce((t,r)=>t+(parseFloat(r.soldPrice)||0)*ne(r),0)-Re.reduce((t,r)=>t+(parseFloat(r.buy)||0)*ne(r),0),Me=We.reduce((t,r)=>t+ne(r),0),Ve=Re.reduce((t,r)=>t+ne(r),0),I=(t,r={})=>E(t,B,r),ht=async()=>{try{await Tt(Je)}catch(t){j.error("Chyba pri odhl√°sen√≠: "+t.message)}},De=t=>{if(t==null||t==="")return"";const r=v(parseFloat(t));return Number.isFinite(r)?String(Math.round(r*100)/100):""},Ke=()=>{X(null),u({item:"",buy:"",current:"",status:"zbierka",note:"",imageFile:null,imageUrl:"",soldPrice:"",quantity:"1",isPublic:!1}),A(!0)},ye=t=>{X(t),u({item:t.item||"",buy:De(t.buy),current:De(t.current),status:t.status||"zbierka",note:t.note||"",imageFile:null,imageUrl:t.imageUrl||"",soldPrice:De(t.soldPrice),quantity:String(t.quantity||1),isPublic:!!t.isPublic}),A(!0)},bt=async t=>{if(t.preventDefault(),!o.item.trim()){j.warning('Vypl≈à aspo≈à pole "Polo≈æka"');return}try{const r=Math.max(1,parseInt(o.quantity,10)||1),x=se=>{const me=parseFloat(se);return Number.isFinite(me)?z(me):null};let U=o.imageUrl;if(o.imageFile){const se=At(zt,`cards/${s.uid}/${Date.now()}_${o.imageFile.name}`);await $t(se,o.imageFile),U=await Bt(se)}const N={item:o.item.trim(),buy:o.buy?x(o.buy):null,current:o.current?x(o.current):null,status:o.status,note:o.note.trim(),imageUrl:U,userId:s.uid,quantity:r,isPublic:!!o.isPublic,updatedAt:Y()};if(o.status==="predan√°"){const se=k&&k.status==="zbierka",me=!k&&o.status==="predan√°";(se||me||!k?.soldAt)&&(N.soldAt=Y()),N.soldPrice=o.soldPrice?x(o.soldPrice):o.current?x(o.current):null}else k&&k.status==="predan√°"&&(N.soldAt=null,N.soldPrice=null);k?await ve(K(T,"cards",k.id),N):await Be(J(T,"cards"),{...N,createdAt:Y()}),A(!1)}catch(r){j.error("Chyba pri ukladan√≠: "+r.message)}},Te=t=>{Ne(t),fe(!0)},yt=async()=>{if(Z)try{await Ft(K(T,"cards",Z.id)),j.success("Karta bola zmazan√°"),fe(!1),Ne(null)}catch(t){j.error("Chyba pri mazan√≠: "+t.message)}},Ae=t=>{Ee(t),ze(t.current!=null?String(Math.round(v(t.current)*100)/100):""),Ce(String(t.quantity||1)),xe(!0)},mt=async()=>{if(!R)return;const t=Math.max(1,parseInt(we,10)||1),r=R.quantity||1;if(t>r){j.warning(`Maxim√°lny poƒçet kusov na predaj je ${r}`);return}const x=te?z(parseFloat(te)):R.current||0;try{if(t<r){const U=r-t;await ve(K(T,"cards",R.id),{quantity:U,updatedAt:Y()}),await Be(J(T,"cards"),{userId:R.userId,item:R.item,buy:R.buy||null,current:R.current||null,status:"predan√°",soldPrice:x,soldAt:Y(),note:R.note||"",imageUrl:R.imageUrl||null,quantity:t,isPublic:!!R.isPublic,createdAt:Y(),updatedAt:Y()})}else await ve(K(T,"cards",R.id),{status:"predan√°",soldPrice:x,soldAt:Y(),updatedAt:Y()});j.success(`Karta predan√° za ${I(x)} (${t}x)`),xe(!1),Ee(null),ze(""),Ce("1")}catch(U){j.error("Chyba pri predaji: "+U.message)}},Oe=t=>{const r=t.target.files?.[0];r&&u({...o,imageFile:r})},c={container:{fontFamily:"system-ui, -apple-system, Arial",padding:b?"24px":"12px",backgroundColor:i?"#0f172a":"#f8fafc",color:i?"#f8fafc":"#0f172a",minHeight:"100vh",transition:"all 0.3s"},button:{padding:"10px 16px",minHeight:"44px",borderRadius:"12px",border:"1px solid #cbd5e1",background:"#fff",cursor:"pointer",transition:"all 0.2s",fontSize:"14px",fontWeight:"500"},primaryButton:{background:"#1d4ed8",color:"#fff",borderColor:"#1d4ed8"}},ae=parseFloat(te)||0,Ye=Math.max(1,parseInt(we,10)||1),G=R?v(R.buy||0):0,jt=(ae-G)*Ye,vt=G>0?((ae-G)/G*100).toFixed(1):"0.0";return e.jsxs("div",{style:c.container,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("h1",{style:{margin:0,fontSize:b?"26px":"20px",flexBasis:b?"auto":"100%"},children:["üéØ ",n("manager.title")]}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[b?e.jsxs("button",{onClick:()=>Se(!0),style:{...c.button,padding:"8px 12px",display:"flex",alignItems:"center",gap:"6px"},title:"Upravi≈• profil",children:[ie.photoURL?e.jsx("img",{src:ie.photoURL,alt:ie.displayName,style:{width:"24px",height:"24px",borderRadius:"50%",objectFit:"cover"}}):e.jsx("span",{children:"üë§"}),e.jsx("span",{style:{fontSize:"14px"},children:ie.displayName})]}):e.jsx("button",{onClick:()=>Se(!0),style:{...c.button,width:"44px",height:"44px",padding:"0"},title:"Upravi≈• profil",children:"üë§"}),e.jsx("button",{onClick:ht,style:{...c.button,border:"1px solid #fecaca",background:"#fee2e2",color:"#991b1b"},children:b?"Odhl√°si≈•":"üö™"}),e.jsxs("button",{onClick:()=>ce(!0),style:{...c.button,width:"44px",height:"44px",padding:"0",background:"#f0f9ff",position:"relative"},title:"Notifik√°cie",children:["üîî",ee>0&&e.jsx("span",{style:{position:"absolute",top:"-4px",right:"-4px",background:"#ef4444",color:"white",borderRadius:"50%",width:"20px",height:"20px",fontSize:"11px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",border:"2px solid "+(i?"#0f172a":"#f8fafc")},children:ee>9?"9+":ee})]}),e.jsx(St,{darkMode:i}),e.jsx(qt,{darkMode:i}),pt==="admin"&&e.jsx("button",{onClick:()=>window.open("/admin_panel.html","_blank"),style:{...c.button,background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",color:"white",fontWeight:"600",border:"none",boxShadow:"0 2px 8px rgba(251, 191, 36, 0.3)"},title:"Admin Panel",children:b?"üëë Admin":"üëë"}),e.jsx("button",{onClick:()=>h(!i),style:{...c.button,width:"44px",height:"44px",padding:"0",background:"#eef2ff"},title:"Prepn√∫≈• tmav√Ω re≈æim",children:i?"‚òÄÔ∏è":"üåô"})]})]}),e.jsx("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"12px",marginBottom:"16px",overflow:"hidden"},children:b?e.jsxs("div",{style:{padding:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"28px",fontWeight:"bold"},children:I(Ie)}),e.jsx("div",{style:{fontSize:"11px",opacity:.85},children:n("manager.stats.value")})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:oe>=0?"#10b981":"#ef4444"},children:[oe>=0?"+":"",I(oe)]}),e.jsx("div",{style:{fontSize:"11px",opacity:.85},children:n("manager.stats.unrealized")})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:re>=0?"#10b981":"#ef4444"},children:[re>=0?"+":"",I(re)]}),e.jsx("div",{style:{fontSize:"11px",opacity:.85},children:n("manager.stats.realized")})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"28px",fontWeight:"bold"},children:Me}),e.jsx("div",{style:{fontSize:"11px",opacity:.85},children:n("manager.stats.inCollection")})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"28px",fontWeight:"bold"},children:Ve}),e.jsx("div",{style:{fontSize:"11px",opacity:.85},children:n("manager.stats.sold")})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{onClick:()=>ut(!Pe),style:{padding:"12px 16px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold"},children:I(Ie)}),e.jsx("div",{style:{fontSize:"11px",opacity:.85},children:n("manager.stats.value")})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:oe>=0?"#10b981":"#ef4444"},children:[oe>=0?"+":"",I(oe)]}),e.jsx("div",{style:{fontSize:"11px",opacity:.85},children:n("manager.stats.unrealized")})]})]}),e.jsx("span",{style:{fontSize:"16px",opacity:.8,transition:"transform 0.2s",transform:Pe?"rotate(180deg)":"rotate(0deg)"},children:"‚ñº"})]}),Pe&&e.jsxs("div",{style:{padding:"0 16px 12px",display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",textAlign:"center",borderTop:"1px solid rgba(255,255,255,0.2)",paddingTop:"12px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:re>=0?"#10b981":"#ef4444"},children:[re>=0?"+":"",I(re)]}),e.jsx("div",{style:{fontSize:"11px",opacity:.85,marginTop:"4px"},children:n("manager.stats.realized")})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"bold"},children:Me}),e.jsx("div",{style:{fontSize:"11px",opacity:.85,marginTop:"4px"},children:n("manager.stats.inCollection")})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"bold"},children:Ve}),e.jsx("div",{style:{fontSize:"11px",opacity:.85,marginTop:"4px"},children:n("manager.stats.sold")})]})]})]})}),e.jsx("div",{style:{marginBottom:"16px"},children:b?e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"stretch"},children:[e.jsx("input",{type:"text",placeholder:n("manager.search"),value:d,onChange:t=>w(t.target.value),style:{...c.button,flex:5,minWidth:0,background:i?"#1e293b":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"16px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1,minWidth:0},children:[e.jsxs("select",{value:S,onChange:t=>de(t.target.value),style:{...c.button,width:"100%",background:i?"#1e293b":"#fff",color:i?"#f8fafc":"#0f172a",padding:"8px 12px",minHeight:"0",height:"auto"},children:[e.jsx("option",{value:"all",children:n("manager.filter.all")}),e.jsx("option",{value:"zbierka",children:n("manager.filter.collection")}),e.jsx("option",{value:"predan√°",children:n("manager.filter.sold")})]}),e.jsxs("select",{value:O?"photo":"all",onChange:t=>H(t.target.value==="photo"),style:{...c.button,width:"100%",background:i?"#1e293b":"#fff",color:i?"#f8fafc":"#0f172a",padding:"8px 12px",minHeight:"0",height:"auto"},children:[e.jsx("option",{value:"all",children:n("manager.filter.allPhotos")}),e.jsx("option",{value:"photo",children:n("manager.filter.withPhoto")})]})]}),e.jsx("button",{onClick:Ke,style:{...c.button,...c.primaryButton,flex:1,minWidth:0},children:n("manager.add")}),e.jsx("div",{style:{display:"flex",gap:"4px",flex:1,minWidth:0,background:i?"#334155":"#f3f4f6",borderRadius:"12px",padding:"4px"},children:[{mode:"list",icon:"üìã",title:n("manager.view.list")},{mode:"cards",icon:"üèí",title:n("manager.view.tiles")},{mode:"gallery",icon:"üñºÔ∏è",title:n("manager.view.gallery")},{mode:"table",icon:"üìä",title:n("manager.view.table")}].map(({mode:t,icon:r,title:x})=>e.jsx("button",{onClick:()=>Q(t),title:x,style:{flex:1,minHeight:"44px",padding:"10px 2px",border:"none",borderRadius:"8px",background:L===t?"#667eea":"transparent",color:L===t?"white":i?"#f8fafc":"#64748b",cursor:"pointer",fontSize:"16px",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},children:r},t))}),e.jsx("button",{onClick:()=>Le(!M),style:{...c.button,flex:1,minWidth:0,background:M?"#667eea":i?"#334155":"#f3f4f6",color:M?"white":i?"#f8fafc":"#0f172a"},children:M?`üìâ ${n("manager.chart.hide")}`:`üìà ${n("manager.chart.show")}`}),e.jsx("div",{style:{flex:1,minWidth:0},children:e.jsx(Ze,{onImportComplete:()=>{}})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px",alignItems:"stretch"},children:[e.jsx("input",{type:"text",placeholder:n("manager.search"),value:d,onChange:t=>w(t.target.value),style:{...c.button,flex:1,minWidth:0,background:i?"#1e293b":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"16px"}}),e.jsx("button",{onClick:Ke,style:{...c.button,...c.primaryButton,flex:"0 0 auto",padding:"12px 16px"},children:"+"}),e.jsx("button",{onClick:()=>ft(!be),style:{...c.button,flex:"0 0 auto",background:be?"#667eea":i?"#334155":"#f3f4f6",color:be?"white":i?"#f8fafc":"#64748b",padding:"12px 14px"},children:"üîß"})]}),be&&e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"stretch"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:"1 1 calc(50% - 4px)"},children:[e.jsxs("select",{value:S,onChange:t=>de(t.target.value),style:{...c.button,width:"100%",flex:1,background:i?"#1e293b":"#fff",color:i?"#f8fafc":"#0f172a"},children:[e.jsx("option",{value:"all",children:n("manager.filter.all")}),e.jsx("option",{value:"zbierka",children:n("manager.filter.collection")}),e.jsx("option",{value:"predan√°",children:n("manager.filter.sold")})]}),e.jsxs("select",{value:O?"photo":"all",onChange:t=>H(t.target.value==="photo"),style:{...c.button,width:"100%",flex:1,background:i?"#1e293b":"#fff",color:i?"#f8fafc":"#0f172a"},children:[e.jsx("option",{value:"all",children:n("manager.filter.allPhotos")}),e.jsx("option",{value:"photo",children:n("manager.filter.withPhoto")})]})]}),e.jsx("div",{style:{display:"flex",gap:"4px",flex:"1 1 calc(50% - 4px)",minWidth:0,flexWrap:"wrap",background:i?"#334155":"#f3f4f6",borderRadius:"12px",padding:"4px"},children:[{mode:"list",icon:"üìã",title:n("manager.view.list")},{mode:"cards",icon:"üèí",title:n("manager.view.tiles")},{mode:"gallery",icon:"üñºÔ∏è",title:n("manager.view.gallery")},{mode:"table",icon:"üìä",title:n("manager.view.table")}].map(({mode:t,icon:r,title:x})=>e.jsx("button",{onClick:()=>Q(t),title:x,style:{flex:1,minWidth:"44px",minHeight:"44px",padding:"10px 8px",border:"none",borderRadius:"8px",background:L===t?"#667eea":"transparent",color:L===t?"white":i?"#f8fafc":"#64748b",cursor:"pointer",fontSize:"18px",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},children:r},t))}),e.jsx("button",{onClick:()=>Le(!M),style:{...c.button,background:M?"#667eea":i?"#334155":"#f3f4f6",color:M?"white":i?"#f8fafc":"#0f172a",flex:"1 1 calc(50% - 4px)",minWidth:0},children:M?`üìâ ${n("manager.chart.hide")}`:`üìà ${n("manager.chart.show")}`}),e.jsx("div",{style:{flex:"1 1 calc(50% - 4px)",minWidth:0},children:e.jsx(Ze,{onImportComplete:()=>{}})})]})]})}),M&&e.jsx("div",{style:{marginBottom:"16px"},children:e.jsx(Ut,{user:s,darkMode:i,isMockAuth:!1})}),L==="cards"?e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:D.length===0?e.jsx("div",{style:{gridColumn:"1 / -1",padding:"40px",textAlign:"center",color:"#64748b"},children:P.length===0?`üìã ${n("manager.empty")}`:`üîç ${n("manager.noResults")}`}):D.map(t=>e.jsxs("div",{className:"card-item",style:{background:i?"#1e293b":"#fff",border:`1px solid ${i?"#334155":"#e2e8f0"}`,borderRadius:"12px",padding:"16px",display:"flex",flexDirection:"column",gap:"12px"},children:[t.imageUrl&&e.jsx("img",{src:t.imageUrl,alt:"foto",style:{width:"100%",height:"180px",objectFit:"contain",borderRadius:"8px",cursor:"pointer",background:i?"#0f172a":"#f8fafc"},onClick:r=>{r.stopPropagation(),he(t.imageUrl)}}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"bold"},children:t.item}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"13px"},children:[t.buy!=null&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"#64748b"},children:n("manager.card.buy")}),e.jsx("div",{style:{fontWeight:"600"},children:I(t.buy)})]}),t.current!=null&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"#64748b"},children:n("manager.card.current")}),e.jsx("div",{style:{fontWeight:"600"},children:I(t.current)})]}),t.status==="predan√°"&&t.soldPrice!=null&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"#64748b"},children:n("manager.card.soldFor")}),e.jsx("div",{style:{fontWeight:"600"},children:I(t.soldPrice)})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#64748b"},children:n("manager.card.quantity")}),e.jsx("div",{style:{fontWeight:"600"},children:t.quantity||1})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#64748b"},children:n("manager.card.status")}),e.jsx("div",{style:{fontWeight:"600",padding:"4px 8px",borderRadius:"6px",display:"inline-block",background:t.status==="zbierka"?"#d1fae5":"#fee2e2",color:t.status==="zbierka"?"#065f46":"#991b1b"},children:t.status==="zbierka"?n("manager.filter.collection"):n("manager.filter.sold")})]})]}),t.note&&e.jsx("div",{style:{fontSize:"13px",color:"#64748b",fontStyle:"italic"},children:t.note}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[e.jsx("button",{onClick:()=>ye(t),style:{...c.button,flex:"1",background:"#eef2ff",border:"1px solid #c7d2fe",color:"#1e3a8a"},children:n("manager.actions.edit")}),t.status==="zbierka"&&e.jsx("button",{onClick:()=>Ae(t),style:{...c.button,flex:"1",background:"#d1fae5",border:"1px solid #6ee7b7",color:"#065f46"},children:n("manager.actions.sell")}),e.jsx("button",{onClick:()=>Te(t),style:{...c.button,flex:"1",background:"#fee2e2",color:"#991b1b",border:"1px solid #fecaca"},children:n("manager.actions.delete")})]}),t.priceHistory&&t.priceHistory.length>0&&e.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:`1px solid ${i?"#334155":"#e2e8f0"}`},children:[e.jsx("button",{onClick:()=>lt(pe?.id===t.id?null:t),style:{...c.button,width:"100%",background:pe?.id===t.id?"#667eea":i?"#334155":"#f3f4f6",color:pe?.id===t.id?"white":i?"#f8fafc":"#0f172a",fontSize:"12px",padding:"8px"},children:pe?.id===t.id?`üìâ ${n("manager.actions.hideChart")}`:`üìà ${n("manager.actions.showChart")}`}),pe?.id===t.id&&e.jsx("div",{style:{marginTop:"12px"},children:e.jsx(Xe,{priceHistory:t.priceHistory,darkMode:i})})]})]},t.id))}):L==="list"?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:D.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#64748b",background:i?"#1e293b":"#fff",borderRadius:"12px",border:`1px solid ${i?"#334155":"#e2e8f0"}`},children:P.length===0?`üìã ${n("manager.empty")}`:`üîç ${n("manager.noResults")}`}):D.map((t,r)=>e.jsxs("div",{onClick:()=>ye(t),style:{background:i?"#1e293b":"#fff",border:`1px solid ${i?"#334155":"#e2e8f0"}`,borderRadius:"10px",padding:"12px 14px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:x=>{x.currentTarget.style.background=i?"#334155":"#f8fafc",x.currentTarget.style.borderColor=i?"#475569":"#cbd5e1"},onMouseLeave:x=>{x.currentTarget.style.background=i?"#1e293b":"#fff",x.currentTarget.style.borderColor=i?"#334155":"#e2e8f0"},children:[e.jsxs("span",{style:{fontSize:"12px",color:"#64748b",minWidth:"24px"},children:[r+1,"."]}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.item}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"2px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[t.buy!=null&&e.jsxs("span",{children:[n("manager.card.buy")," ",I(t.buy)]}),t.current!=null&&e.jsxs("span",{style:{fontWeight:"600",color:i?"#f8fafc":"#0f172a"},children:[n("manager.card.current")," ",I(t.current)]}),t.status==="predan√°"&&t.soldPrice!=null&&e.jsxs("span",{style:{color:"#10b981"},children:[n("manager.card.soldFor")," ",I(t.soldPrice)]}),e.jsxs("span",{children:[n("manager.card.quantity")," ",t.quantity||1]})]})]}),e.jsx("span",{style:{padding:"4px 8px",borderRadius:"6px",fontSize:"11px",fontWeight:"600",background:t.status==="zbierka"?"#d1fae5":"#fee2e2",color:t.status==="zbierka"?"#065f46":"#991b1b",whiteSpace:"nowrap"},children:t.status==="zbierka"?n("manager.filter.collection"):n("manager.filter.sold")}),e.jsxs("div",{style:{display:"flex",gap:"6px"},onClick:x=>x.stopPropagation(),children:[t.status==="zbierka"&&e.jsx("button",{onClick:()=>Ae(t),style:{...c.button,padding:"6px 10px",minHeight:"32px",fontSize:"12px",background:"#d1fae5",border:"1px solid #6ee7b7",color:"#065f46"},children:"üí∞"}),e.jsx("button",{onClick:()=>Te(t),style:{...c.button,padding:"6px 10px",minHeight:"32px",fontSize:"12px",background:"#fee2e2",color:"#991b1b",border:"1px solid #fecaca"},children:"üóëÔ∏è"})]})]},t.id))}):L==="gallery"?e.jsx("div",{style:{display:"grid",gridTemplateColumns:b?"repeat(auto-fill, minmax(180px, 1fr))":"repeat(auto-fill, minmax(140px, 1fr))",gap:"12px"},children:D.length===0?e.jsx("div",{style:{gridColumn:"1 / -1",padding:"40px",textAlign:"center",color:"#64748b",background:i?"#1e293b":"#fff",borderRadius:"12px",border:`1px solid ${i?"#334155":"#e2e8f0"}`},children:P.length===0?`üìã ${n("manager.empty")}`:`üîç ${n("manager.noResults")}`}):D.map(t=>e.jsxs("div",{style:{background:i?"#1e293b":"#fff",border:`1px solid ${i?"#334155":"#e2e8f0"}`,borderRadius:"12px",overflow:"hidden",cursor:"pointer",transition:"all 0.2s",position:"relative"},onClick:()=>ye(t),onMouseEnter:r=>{r.currentTarget.style.borderColor="#667eea",r.currentTarget.style.transform="scale(1.02)"},onMouseLeave:r=>{r.currentTarget.style.borderColor=i?"#334155":"#e2e8f0",r.currentTarget.style.transform="scale(1)"},children:[t.imageUrl?e.jsx("div",{style:{position:"relative",paddingTop:"100%",background:i?"#0f172a":"#f8fafc"},children:e.jsx("img",{src:t.imageUrl,alt:t.item,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain"}})}):e.jsx("div",{style:{paddingTop:"100%",background:i?"#334155":"#f1f5f9",position:"relative"},children:e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"32px",opacity:.3},children:"üèí"})}),e.jsxs("div",{style:{padding:"10px"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:"4px"},children:t.item}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:"700",color:i?"#10b981":"#059669"},children:t.current!=null?`${m((t.current||0)*(t.quantity||1),B)}`:"‚Äî"}),e.jsx("span",{style:{padding:"2px 6px",borderRadius:"4px",fontSize:"9px",fontWeight:"600",background:t.status==="zbierka"?"#d1fae5":"#fee2e2",color:t.status==="zbierka"?"#065f46":"#991b1b"},children:t.status==="zbierka"?n("manager.filter.collection"):n("manager.filter.sold")})]})]})]},t.id))}):e.jsxs("div",{style:{position:"relative"},children:[!b&&e.jsx("div",{style:{position:"absolute",right:0,top:0,bottom:0,width:"40px",background:`linear-gradient(to right, transparent, ${i?"rgba(30, 41, 59, 0.9)":"rgba(255, 255, 255, 0.9)"})`,pointerEvents:"none",zIndex:5,borderRadius:"0 12px 12px 0",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:"16px",opacity:.6},children:"‚Üí"})}),e.jsx("div",{style:{overflow:"auto",maxHeight:"67vh",borderRadius:"12px",border:`1px solid ${i?"#334155":"#e2e8f0"}`,background:i?"#1e293b":"#fff"},children:e.jsxs("table",{style:{width:"100%",minWidth:b?"auto":"800px",borderCollapse:"collapse",fontSize:"14px",background:i?"#1e293b":"#fff"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:i?"#334155":"#f8fafc"},children:[e.jsx("th",{style:{padding:"10px 12px",textAlign:"left",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:"#"}),e.jsx("th",{style:{padding:"10px 12px",textAlign:"left",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:n("manager.table.photo")}),e.jsx("th",{style:{padding:"10px 12px",textAlign:"left",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:n("manager.table.item")}),e.jsxs("th",{style:{padding:"10px 12px",textAlign:"right",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:[n("manager.table.buyPrice")," (",g,")"]}),e.jsxs("th",{style:{padding:"10px 12px",textAlign:"right",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:[n("manager.table.currentPrice")," (",g,")"]}),e.jsx("th",{style:{padding:"10px 12px",textAlign:"right",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:n("manager.table.quantity")}),e.jsxs("th",{style:{padding:"10px 12px",textAlign:"right",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:[n("manager.table.soldPrice")," (",g,")"]}),e.jsx("th",{style:{padding:"10px 12px",textAlign:"left",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:n("manager.table.status")}),e.jsx("th",{style:{padding:"10px 12px",textAlign:"left",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:n("manager.table.actions")})]})}),e.jsx("tbody",{children:D.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",style:{padding:"40px",textAlign:"center",color:"#64748b"},children:P.length===0?`üìã ${n("manager.empty")}`:`üîç ${n("manager.noResults")}`})}):D.map((t,r)=>e.jsxs("tr",{onClick:()=>ye(t),style:{borderBottom:`1px solid ${i?"#334155":"#f1f5f9"}`,cursor:"pointer",transition:"background 0.15s"},onMouseEnter:x=>x.currentTarget.style.background=i?"#334155":"#f8fafc",onMouseLeave:x=>x.currentTarget.style.background="transparent",children:[e.jsx("td",{style:{padding:"10px 12px"},children:r+1}),e.jsx("td",{style:{padding:"10px 12px"},children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:"foto",style:{width:"56px",height:"56px",objectFit:"contain",borderRadius:"10px",border:"1px solid #e5e7eb",background:i?"#0f172a":"#f8fafc"},onClick:x=>{x.stopPropagation(),he(t.imageUrl)}}):e.jsx("span",{style:{color:"#64748b"},children:"‚Äî"})}),e.jsx("td",{style:{padding:"10px 12px"},children:t.item}),e.jsx("td",{style:{padding:"10px 12px",textAlign:"right"},children:t.buy!=null?I(t.buy):""}),e.jsx("td",{style:{padding:"10px 12px",textAlign:"right"},children:t.current!=null?e.jsxs("span",{children:[I(t.current),t.ebayPriceSource&&e.jsx("span",{style:{marginLeft:"6px",fontSize:"14px"},title:"Cena z eBay",children:"üìä"})]}):""}),e.jsx("td",{style:{padding:"10px 12px",textAlign:"right"},children:t.quantity||1}),e.jsx("td",{style:{padding:"10px 12px",textAlign:"right"},children:t.status==="predan√°"&&t.soldPrice!=null?I(t.soldPrice):""}),e.jsx("td",{style:{padding:"10px 12px"},children:e.jsx("span",{style:{padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",background:t.status==="zbierka"?"#d1fae5":"#fee2e2",color:t.status==="zbierka"?"#065f46":"#991b1b"},children:t.status==="zbierka"?n("manager.filter.collection"):n("manager.filter.sold")})}),e.jsxs("td",{style:{padding:"10px 12px",whiteSpace:"nowrap"},onClick:x=>x.stopPropagation(),children:[t.status==="zbierka"&&e.jsx("button",{onClick:()=>Ae(t),style:{...c.button,background:"#d1fae5",border:"1px solid #6ee7b7",color:"#065f46",marginRight:"5px",padding:"8px 12px",minHeight:"36px"},children:"üí∞"}),e.jsx("button",{onClick:()=>Te(t),style:{...c.button,background:"#fee2e2",color:"#991b1b",border:"1px solid #fecaca",padding:"8px 12px",minHeight:"36px"},children:"üóëÔ∏è"})]})]},t.id))})]})})]}),q&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(15, 23, 42, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:b?"20px":"12px"},onClick:()=>A(!1),children:e.jsxs("div",{className:"modal-content",style:{background:i?"#1e293b":"white",color:i?"#f8fafc":"#0f172a",borderRadius:"16px",width:"100%",maxWidth:b?"680px":"100%",maxHeight:b?"none":"calc(100vh - 24px)",overflowY:b?"visible":"auto",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.4)"},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{padding:b?"16px 24px":"14px 16px",borderBottom:`1px solid ${i?"#334155":"#e2e8f0"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("strong",{style:{fontSize:"18px"},children:n(k?"manager.modal.edit":"manager.modal.add")}),e.jsx("button",{onClick:()=>A(!1),style:{background:i?"#334155":"#f1f5f9",border:"none",borderRadius:"8px",cursor:"pointer",color:i?"#94a3b8":"#64748b",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:"‚úï"})]}),e.jsxs("form",{onSubmit:bt,children:[e.jsxs("div",{style:{padding:b?"20px 24px":"16px",display:"flex",flexDirection:b?"row":"column",gap:b?"20px":"16px"},children:[e.jsx("div",{style:{flex:b?"0 0 160px":"none"},children:o.imageUrl||o.imageFile?e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{src:o.imageFile?URL.createObjectURL(o.imageFile):o.imageUrl,alt:"Preview",style:{width:b?"160px":"100%",height:b?"160px":"180px",objectFit:"contain",borderRadius:"12px",border:`1px solid ${i?"#334155":"#e2e8f0"}`,background:i?"#0f172a":"#f8fafc"}}),e.jsxs("label",{style:{position:"absolute",bottom:"8px",right:"8px",background:i?"#334155":"white",borderRadius:"8px",padding:"6px 10px",cursor:"pointer",fontSize:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:["üì∑ ",n("manager.modal.changePhoto"),e.jsx("input",{type:"file",accept:"image/*",onChange:Oe,style:{display:"none"}})]})]}):e.jsxs("label",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:b?"160px":"100%",height:b?"160px":"100px",border:`2px dashed ${i?"#334155":"#cbd5e1"}`,borderRadius:"12px",cursor:"pointer",background:i?"#0f172a":"#f8fafc",transition:"all 0.2s"},children:[e.jsx("span",{style:{fontSize:"28px",opacity:.5},children:"üì∑"}),e.jsx("span",{style:{fontSize:"12px",color:"#64748b",marginTop:"4px"},children:n("manager.modal.addPhoto")}),e.jsx("input",{type:"file",accept:"image/*",onChange:Oe,style:{display:"none"}})]})}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"14px",minWidth:0},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",display:"block",marginBottom:"6px"},children:[n("manager.modal.item")," *"]}),e.jsx("input",{type:"text",value:o.item,onChange:t=>u({...o,item:t.target.value}),placeholder:"napr. 2005 Upper Deck Young Guns #201 Crosby PSA 10",required:!0,style:{...c.button,width:"100%",boxSizing:"border-box",padding:"12px 14px",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"14px"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:b?"1fr 1fr":"1fr",gap:"14px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",display:"block",marginBottom:"6px"},children:n("manager.modal.status")}),e.jsxs("select",{value:o.status,onChange:t=>u({...o,status:t.target.value}),style:{...c.button,width:"100%",boxSizing:"border-box",padding:"12px 14px",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"14px"},children:[e.jsx("option",{value:"zbierka",children:n("manager.filter.collection")}),e.jsx("option",{value:"predan√°",children:n("manager.filter.sold")})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",display:"block",marginBottom:"6px"},children:[n("manager.modal.buyPrice")," (",g,")"]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:o.buy,onChange:t=>u({...o,buy:t.target.value}),placeholder:g,style:{...c.button,width:"100%",boxSizing:"border-box",padding:"12px 14px",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"14px"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:o.status==="predan√°"&&b?"1fr 1fr":"1fr",gap:"14px"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",display:"block",marginBottom:"6px"},children:[n("manager.modal.currentPrice")," (",g,")",k&&k.ebayPriceSource&&e.jsx("span",{style:{marginLeft:"6px",color:"#10b981"},children:"üìä"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:o.current,onChange:t=>u({...o,current:t.target.value}),placeholder:g,style:{...c.button,width:"100%",boxSizing:"border-box",padding:"12px 14px",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"14px"}})]}),o.status==="predan√°"&&e.jsxs("div",{children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#10b981",display:"block",marginBottom:"6px"},children:[n("manager.modal.soldPrice")," (",g,")"]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:o.soldPrice,onChange:t=>u({...o,soldPrice:t.target.value}),placeholder:o.current||g,style:{...c.button,width:"100%",boxSizing:"border-box",padding:"12px 14px",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"14px",borderColor:"#10b981"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:b?"1fr 1fr":"1fr",gap:"14px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",display:"block",marginBottom:"6px"},children:n("manager.modal.quantity")}),e.jsx("input",{type:"number",step:"1",min:"1",value:o.quantity,onChange:t=>u({...o,quantity:t.target.value}),placeholder:"1",style:{...c.button,width:"100%",boxSizing:"border-box",padding:"12px 14px",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"14px"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"6px 0"},children:[e.jsx("input",{type:"checkbox",checked:!!o.isPublic,onChange:t=>u({...o,isPublic:t.target.checked}),style:{width:"18px",height:"18px"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:i?"#f8fafc":"#0f172a"},children:n("manager.modal.public")}),e.jsx("div",{style:{fontSize:"11px",color:i?"#94a3b8":"#64748b"},children:n("manager.modal.publicHint")})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",display:"block",marginBottom:"6px"},children:n("manager.modal.note")}),e.jsx("input",{type:"text",value:o.note,onChange:t=>u({...o,note:t.target.value}),placeholder:n("manager.modal.notePlaceholder"),style:{...c.button,width:"100%",boxSizing:"border-box",padding:"12px 14px",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"14px"}})]})]})]}),k&&k.priceHistory&&k.priceHistory.length>0&&e.jsx("div",{style:{padding:"0 24px 16px",borderTop:`1px solid ${i?"#334155":"#e2e8f0"}`,marginTop:"0",paddingTop:"16px"},children:e.jsx(Xe,{priceHistory:k.priceHistory,darkMode:i,compact:!0})}),e.jsxs("div",{style:{padding:b?"14px 24px":"12px 16px",borderTop:`1px solid ${i?"#334155":"#e2e8f0"}`,display:"flex",gap:"12px",justifyContent:"flex-end",background:i?"#0f172a":"#f8fafc",borderRadius:"0 0 16px 16px"},children:[e.jsx("button",{type:"button",onClick:()=>A(!1),style:{...c.button,padding:"12px 24px"},children:n("manager.modal.cancel")}),e.jsx("button",{type:"submit",style:{...c.button,...c.primaryButton,padding:"12px 28px"},children:n("manager.modal.save")})]})]})]})}),_&&e.jsx(Lt,{user:s,darkMode:i,isMockAuth:!1,mockNotifications:F,onClose:()=>ce(!1)}),Ue&&e.jsx(Et,{user:{...s,displayName:ie.displayName,photoURL:ie.photoURL},isOpen:Ue,isMockAuth:!1,onClose:()=>Se(!1),onUpdate:t=>{He(t)}}),dt&&R&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(15, 23, 42, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"16px"},onClick:()=>xe(!1),children:e.jsxs("div",{style:{background:i?"#1e293b":"white",color:i?"#f8fafc":"#0f172a",borderRadius:"16px",width:"100%",maxWidth:"400px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{padding:"20px",borderBottom:`1px solid ${i?"#334155":"#e2e8f0"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:n("manager.sell.title")}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"13px",color:"#64748b"},children:n("manager.sell.subtitle")})]}),e.jsx("button",{onClick:()=>xe(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:i?"#94a3b8":"#64748b",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px"},children:"‚úï"})]}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{background:i?"#334155":"#f8fafc",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"4px"},children:R.item}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b"},children:[n("manager.sell.buyPrice")," ",I(R.buy||0)]}),R.current&&e.jsxs("div",{style:{fontSize:"13px",color:"#64748b"},children:[n("manager.sell.currentValue")," ",I(R.current)]})]}),e.jsxs("label",{style:{fontSize:"14px",fontWeight:"500",color:i?"#cbd5e1":"#475569",display:"block",marginBottom:"8px"},children:[n("manager.sell.priceLabel")," (",g,")"]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:te,onChange:t=>ze(t.target.value),placeholder:n("manager.sell.pricePlaceholder"),autoFocus:!0,style:{...c.button,width:"100%",boxSizing:"border-box",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"18px",fontWeight:"600",textAlign:"center",padding:"16px"}}),e.jsxs("div",{style:{marginTop:"12px"},children:[e.jsxs("label",{style:{fontSize:"13px",fontWeight:"500",color:i?"#cbd5e1":"#475569",display:"block",marginBottom:"6px"},children:[n("manager.sell.quantityLabel")," (",n("manager.sell.quantityHint")," ",R.quantity||1,")"]}),e.jsx("input",{type:"number",step:"1",min:"1",max:R.quantity||1,value:we,onChange:t=>Ce(t.target.value),style:{...c.button,width:"100%",boxSizing:"border-box",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"16px",fontWeight:"600",textAlign:"center",padding:"12px"}})]}),te&&R.buy!=null&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",borderRadius:"8px",background:ae>=G?"#d1fae5":"#fee2e2",color:ae>=G?"#065f46":"#991b1b",fontSize:"14px",fontWeight:"600",textAlign:"center"},children:[ae>=G?"üìà":"üìâ"," ",n("manager.sell.profitLoss")," ",I(z(jt)),e.jsxs("span",{style:{fontWeight:"400",marginLeft:"8px"},children:["(",vt,"%)"]})]}),te&&e.jsxs("div",{style:{marginTop:"10px",textAlign:"center",fontSize:"13px",color:i?"#94a3b8":"#64748b"},children:[n("manager.sell.totalLabel"),": ",I(z(ae*Ye))]})]}),e.jsxs("div",{style:{padding:"16px 20px",borderTop:`1px solid ${i?"#334155":"#e2e8f0"}`,display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>xe(!1),style:{...c.button,flex:1,background:i?"#334155":"#f1f5f9",color:i?"#f8fafc":"#475569"},children:n("manager.modal.cancel")}),e.jsx("button",{onClick:mt,style:{...c.button,flex:1,background:"#10b981",color:"white",border:"1px solid #10b981",fontWeight:"600"},children:n("manager.sell.confirm")})]})]})}),ct&&Z&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(15, 23, 42, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"16px"},onClick:()=>fe(!1),children:e.jsxs("div",{style:{background:i?"#1e293b":"white",color:i?"#f8fafc":"#0f172a",borderRadius:"16px",width:"100%",maxWidth:"400px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{padding:"20px",borderBottom:`1px solid ${i?"#334155":"#e2e8f0"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#ef4444"},children:n("manager.delete.title")}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"13px",color:"#64748b"},children:n("manager.delete.subtitle")})]}),e.jsx("button",{onClick:()=>fe(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:i?"#94a3b8":"#64748b",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px"},children:"‚úï"})]}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{background:i?"#334155":"#fef2f2",borderRadius:"12px",padding:"16px",border:`1px solid ${i?"#475569":"#fecaca"}`},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:Z.item}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",display:"flex",gap:"16px",flexWrap:"wrap"},children:[Z.buy!=null&&e.jsxs("span",{children:[n("manager.card.buy")," ",I(Z.buy)]}),Z.current!=null&&e.jsxs("span",{children:[n("manager.card.current")," ",I(Z.current)]})]})]}),e.jsx("p",{style:{margin:"16px 0 0 0",fontSize:"14px",color:i?"#94a3b8":"#64748b",textAlign:"center"},children:n("manager.delete.warning")})]}),e.jsxs("div",{style:{padding:"16px 20px",borderTop:`1px solid ${i?"#334155":"#e2e8f0"}`,display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>fe(!1),style:{...c.button,flex:1,background:i?"#334155":"#f1f5f9",color:i?"#f8fafc":"#475569"},children:n("manager.modal.cancel")}),e.jsx("button",{onClick:yt,style:{...c.button,flex:1,background:"#ef4444",color:"white",border:"1px solid #ef4444",fontWeight:"600"},children:n("manager.delete.confirm")})]})]})}),qe&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:()=>he(null),children:[e.jsx("button",{onClick:()=>he(null),style:{position:"absolute",top:"20px",right:"20px",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",width:"48px",height:"48px",fontSize:"24px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"‚úï"}),e.jsx("img",{src:qe,alt:"Zv√§ƒç≈°en√Ω obr√°zok",style:{maxWidth:"90vw",maxHeight:"90vh",objectFit:"contain",borderRadius:"8px"},onClick:t=>t.stopPropagation()})]})]})}export{Ot as default};
