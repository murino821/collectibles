import{u as ve,j as e,a as Te,d as T,b as Ae,g as tt,t as V,L as it,s as ot}from"./index-DDZJs0OJ.js";import{r as a,R as $e,A as nt,C as Be,X as Le,Y as Ue,T as Ee,a as st,b as Re,L as rt,c as at,d as lt}from"./vendor-charts-mg27ZyhM.js";import{n as J,z as Ne,q as xe,p as He,o as Me,w as ee,A as pe,B as dt,F as Y,H as je,t as ct,I as Ve,J as Fe,K as pt,M as xt,N as ft,O as ht,P as ne,Q as gt}from"./vendor-firebase-wvfBdd7c.js";import"./vendor-react-Bzgz95E1.js";function De({onImportComplete:d}){const l=a.useRef(null),y=ve(),[o,L]=a.useState(()=>window.innerWidth>=768);a.useEffect(()=>{const b=()=>L(window.innerWidth>=768);return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const C=async b=>{const v=b.replace(/^\uFEFF/,"").split(/\r?\n/).map(s=>s.trim()).filter(Boolean);if(!v.length)throw new Error("Pr√°zdny s√∫bor");const W=b.includes(";")?";":",",R=/^polo≈æka$/i.test(v[0])?1:0,k=[];for(let s=R;s<v.length;s++){const p=v[s].split(W)[0].replace(/^"|"$/g,"").trim();p&&p.length>0&&k.push(p)}return k},S=async b=>{const v=b.target.files?.[0];if(v)try{const W=await v.text(),i=await C(W);if(i.length===0){y.warning("V s√∫bore neboli n√°jden√© ≈æiadne polo≈æky.");return}const R=Te.currentUser;if(!R){y.error("Mus√≠≈° by≈• prihl√°sen√Ω!");return}let k=0;const s=J(T,"cards");for(const n of i)await Ne(s,{userId:R.uid,item:n,buy:null,current:null,status:"zbierka",note:"",imageUrl:null,imageName:null,createdAt:new Date}),k++;y.success(`Import hotov√Ω! Pridan√Ωch polo≈æiek: ${k}`),d&&d()}catch(W){console.error("Chyba pri importe:",W),y.error("Chyba pri importe: "+W.message)}finally{b.target.value=""}};return e.jsxs("label",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"10px 16px",minHeight:"44px",height:"100%",width:"100%",boxSizing:"border-box",backgroundColor:"#f3e8ff",color:"#6b21a8",border:"1px solid #e9d5ff",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s",whiteSpace:"normal"},onMouseOver:b=>b.currentTarget.style.backgroundColor="#e9d5ff",onMouseOut:b=>b.currentTarget.style.backgroundColor="#f3e8ff",children:["üìä ",o&&e.jsx("span",{children:"Import z "}),"CSV",e.jsx("input",{ref:l,type:"file",accept:".csv,text/csv",onChange:S,style:{display:"none"}})]})}function ut({user:d,darkMode:l,onClose:y,isMockAuth:o=!1,mockNotifications:L=[]}){const C=ve(),[S,b]=a.useState([]),[v,W]=a.useState(0);a.useEffect(()=>{if(o){b(L),W(L.length);return}if(!d)return;const n=xe(J(T,"notifications"),ee("userId","==",d.uid),ee("read","==",!1),Me("createdAt","desc"),He(10)),p=pe(n,U=>{const A=U.docs.map(B=>({id:B.id,...B.data()}));b(A),W(A.length)});return()=>p()},[d]);const i=async n=>{try{await je(Y(T,"notifications",n),{read:!0})}catch(p){console.error("Error marking notification as read:",p)}},R=async()=>{try{const n=dt(T);S.forEach(p=>{n.update(Y(T,"notifications",p.id),{read:!0})}),await n.commit()}catch(n){console.error("Error marking all as read:",n)}},k=n=>{if(!n)return"";const p=n.toDate(),A=new Date-p,B=Math.floor(A/6e4),f=Math.floor(A/36e5),m=Math.floor(A/864e5);return B<1?"Teraz":B<60?`pred ${B} min`:f<24?`pred ${f} h`:m<7?`pred ${m} d≈àami`:p.toLocaleDateString("sk-SK")},s=async n=>{await i(n.id),n.actionType==="view_log"&&(console.log("View log:",n.actionData),C.info(`Update detail:
‚úÖ √öspe≈°ne: ${n.actionData.successCount}
‚ùå Ne√∫spe≈°ne: ${n.actionData.failCount}
üí∞ Celkov√° hodnota: ‚Ç¨${n.actionData.totalValue.toFixed(2)}`,8e3))};return e.jsxs("div",{style:{position:"fixed",top:0,right:0,width:"100%",maxWidth:"400px",height:"100vh",background:l?"#1e293b":"white",boxShadow:"-4px 0 20px rgba(0,0,0,0.2)",zIndex:9999,overflowY:"auto",padding:"20px",paddingTop:"max(20px, env(safe-area-inset-top, 20px))",paddingBottom:"max(20px, env(safe-area-inset-bottom, 20px))",paddingRight:"max(20px, env(safe-area-inset-right, 20px))",animation:"slideInRight 0.3s ease-out"},children:[e.jsx("style",{children:`
          @keyframes slideInRight {
            from {
              transform: translateX(100%);
            }
            to {
              transform: translateX(0);
            }
          }
        `}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"16px",borderBottom:`2px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"bold"},children:"üîî Notifik√°cie"}),v>0&&e.jsxs("span",{style:{fontSize:"13px",color:"#64748b"},children:[v," ",v===1?"nov√°":"nov√©"]})]}),e.jsx("button",{onClick:y,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",padding:"4px 8px",color:l?"#f8fafc":"#0f172a"},children:"‚úï"})]}),S.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#64748b"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"üì≠"}),e.jsx("p",{style:{margin:0},children:"≈Ωiadne nov√© notifik√°cie"})]}):e.jsxs(e.Fragment,{children:[S.map(n=>e.jsx("div",{style:{padding:"16px",background:l?"#334155":"#f8fafc",borderRadius:"12px",marginBottom:"12px",cursor:"pointer",border:`2px solid ${l?"#475569":"#e2e8f0"}`,transition:"all 0.2s"},onClick:()=>s(n),onMouseEnter:p=>{p.currentTarget.style.borderColor="#667eea",p.currentTarget.style.transform="translateX(-4px)"},onMouseLeave:p=>{p.currentTarget.style.borderColor=l?"#475569":"#e2e8f0",p.currentTarget.style.transform="translateX(0)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[e.jsxs("div",{style:{fontSize:"24px",flexShrink:0},children:[n.type==="price_update_complete"&&"‚úÖ",n.type==="price_update_failed"&&"‚ùå",n.type==="system"&&"‚ÑπÔ∏è"]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"4px",fontSize:"15px"},children:n.title}),e.jsx("div",{style:{fontSize:"14px",color:l?"#cbd5e1":"#64748b",lineHeight:"1.5"},children:n.message}),e.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",marginTop:"8px"},children:k(n.createdAt)})]})]})},n.id)),S.length>0&&e.jsx("button",{onClick:R,style:{width:"100%",padding:"12px",marginTop:"16px",background:l?"#334155":"#f3f4f6",color:l?"#f8fafc":"#0f172a",border:`1px solid ${l?"#475569":"#d1d5db"}`,borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},onMouseEnter:n=>{n.target.style.background=l?"#475569":"#e5e7eb"},onMouseLeave:n=>{n.target.style.background=l?"#334155":"#f3f4f6"},children:"Oznaƒçi≈• v≈°etky ako preƒç√≠tan√©"})]})]})}const ye=[{key:"1Y",label:"1 rok",months:12},{key:"2Y",label:"2 roky",months:24},{key:"5Y",label:"5 rokov",months:60},{key:"10Y",label:"10 rokov",months:120},{key:"ALL",label:"V≈°etko",months:null}];function bt({user:d,darkMode:l=!1,isMockAuth:y=!1}){const[o,L]=a.useState([]),[C,S]=a.useState(!0),[b,v]=a.useState("ALL"),[W,i]=a.useState([]);a.useEffect(()=>{if(y){const m=new Date,z=[{date:new Date(m.getFullYear(),0,15),hodnota:120,pocetPoloziek:2},{date:new Date(m.getFullYear(),1,15),hodnota:150,pocetPoloziek:3},{date:new Date(m.getFullYear(),2,15),hodnota:180,pocetPoloziek:3},{date:new Date(m.getFullYear(),3,15),hodnota:210,pocetPoloziek:4}];L(z),i([{id:"mock-1",status:"zbierka",buy:180,current:320},{id:"mock-2",status:"zbierka",buy:25,current:40},{id:"mock-3",status:"predan√°",buy:210,soldPrice:295},{id:"mock-4",status:"zbierka",buy:8,current:12}]),S(!1);return}if(!d)return;(async()=>{S(!0);try{const m=J(T,"cards"),z=xe(m,ee("userId","==",d.uid)),q=(await ct(z)).docs.map(u=>({id:u.id,...u.data()}));i(q);const g=[];q.forEach(u=>{if(u.createdAt){const j=u.createdAt.toDate?u.createdAt.toDate():new Date(u.createdAt);g.push({date:j,cardId:u.id,type:"purchase",price:u.buy||0,cardName:u.item})}if(u.priceHistory&&u.priceHistory.length>0&&u.priceHistory.forEach(j=>{const D=j.date?.toDate?j.date.toDate():new Date(j.date);g.push({date:D,cardId:u.id,type:"priceUpdate",price:j.price,cardName:u.item})}),u.status==="predan√°"&&u.soldAt){const j=u.soldAt.toDate?u.soldAt.toDate():new Date(u.soldAt);g.push({date:j,cardId:u.id,type:"sale",price:u.soldPrice||u.current||0,cardName:u.item})}}),g.sort((u,j)=>u.date-j.date);const M=new Map,c=[],F=new Map;g.forEach(u=>{const j=u.date.toISOString().split("T")[0];F.has(j)||F.set(j,{date:u.date,events:[]}),F.get(j).events.push(u)}),F.forEach((u,j)=>{const D=[],X=[];u.events.forEach(P=>{if(P.type==="purchase")M.set(P.cardId,{price:P.price,sold:!1}),D.push(P.cardName);else if(P.type==="priceUpdate"){if(M.has(P.cardId)){const se=M.get(P.cardId);se.sold||(se.price=P.price)}}else P.type==="sale"&&(M.has(P.cardId)&&(M.get(P.cardId).sold=!0),X.push(P.cardName))});let E=0,te=0;M.forEach(P=>{P.sold||(E+=P.price,te++)}),c.push({date:u.date,dateKey:j,hodnota:parseFloat(E.toFixed(2)),pocetPoloziek:te,purchases:D.length>0?D:null,sales:X.length>0?X:null,hasPurchase:D.length>0,hasSale:X.length>0})}),L(c)}catch(m){console.error("Error loading portfolio history:",m)}finally{S(!1)}})()},[d]);const R=a.useMemo(()=>{if(o.length===0)return[];const f=ye.find(z=>z.key===b);if(!f||f.months===null)return o;const m=new Date;return m.setMonth(m.getMonth()-f.months),o.filter(z=>z.date>=m)},[o,b]),k=a.useMemo(()=>R.map(f=>({...f,dateFormatted:f.date.toLocaleDateString("sk-SK",{day:"2-digit",month:"short",year:"numeric"}),timestamp:f.date.getTime()})),[R]),s=a.useMemo(()=>{if(k.length===0)return{currentValue:0,initialValue:0,change:0,changePercent:0,cardCount:0,totalInvested:0,totalSold:0,realizedProfit:0};const f=k[0],m=k[k.length-1],z=m.hodnota-f.hodnota,H=f.hodnota>0?z/f.hodnota*100:0,q=W.filter(j=>j.status==="zbierka"),g=W.filter(j=>j.status==="predan√°"),M=W.reduce((j,D)=>j+(parseFloat(D.buy)||0),0),c=g.reduce((j,D)=>j+(parseFloat(D.soldPrice)||0),0),F=g.reduce((j,D)=>j+(parseFloat(D.buy)||0),0),u=c-F;return{currentValue:m.hodnota,initialValue:f.hodnota,change:z,changePercent:H,cardCount:q.length,totalInvested:M,totalSold:c,realizedProfit:u,soldCount:g.length}},[k,W]);if(C)return e.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",background:l?"#1e293b":"#f8fafc",borderRadius:"12px",border:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:"‚è≥"}),e.jsx("p",{style:{margin:0,fontSize:"14px",color:l?"#94a3b8":"#64748b"},children:"Naƒç√≠tavam hist√≥riu portf√≥lia..."})]});if(k.length===0)return e.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:l?"#94a3b8":"#64748b",background:l?"#1e293b":"#f8fafc",borderRadius:"12px",border:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"üìà"}),e.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"16px",fontWeight:"500"},children:"≈Ωiadne historick√© d√°ta"}),e.jsx("p",{style:{margin:0,fontSize:"13px",color:"#94a3b8"},children:"Pridaj karty do zbierky a sleduj v√Ωvoj hodnoty portf√≥lia"})]});const n=s.change>=0,p=n?"#10b981":"#ef4444",U=l?"#334155":"#e2e8f0",A=l?"#cbd5e1":"#475569",B=({active:f,payload:m})=>{if(!f||!m||!m.length)return null;const z=m[0].payload;return e.jsxs("div",{style:{background:l?"#334155":"white",border:`1px solid ${l?"#475569":"#e2e8f0"}`,borderRadius:"8px",padding:"12px",fontSize:"13px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"8px",color:A},children:z.dateFormatted}),e.jsxs("div",{style:{color:l?"#f8fafc":"#0f172a",fontWeight:"600",fontSize:"16px"},children:["‚Ç¨",z.hodnota.toFixed(2)]}),e.jsxs("div",{style:{color:"#94a3b8",fontSize:"12px",marginTop:"4px"},children:[z.pocetPoloziek," polo≈æiek v zbierke"]}),z.purchases&&e.jsxs("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:`1px solid ${U}`},children:[e.jsx("span",{style:{color:"#10b981"},children:"+ N√°kup:"}),e.jsxs("div",{style:{fontSize:"11px",color:"#94a3b8"},children:[z.purchases.slice(0,2).join(", "),z.purchases.length>2&&` +${z.purchases.length-2} ƒèal≈°√≠ch`]})]}),z.sales&&e.jsxs("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:`1px solid ${U}`},children:[e.jsx("span",{style:{color:"#ef4444"},children:"‚àí Predaj:"}),e.jsxs("div",{style:{fontSize:"11px",color:"#94a3b8"},children:[z.sales.slice(0,2).join(", "),z.sales.length>2&&` +${z.sales.length-2} ƒèal≈°√≠ch`]})]})]})};return e.jsxs("div",{style:{background:l?"#1e293b":"white",borderRadius:"12px",padding:"20px",border:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsxs("div",{style:{marginBottom:"20px",paddingBottom:"16px",borderBottom:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginBottom:"16px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"üìä Investiƒçn√© portf√≥lio"}),e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:ye.map(f=>e.jsx("button",{onClick:()=>v(f.key),style:{padding:"6px 12px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"12px",fontWeight:"500",transition:"all 0.2s",background:b===f.key?"#667eea":l?"#334155":"#f1f5f9",color:b===f.key?"white":l?"#94a3b8":"#64748b"},children:f.label},f.key))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"Hodnota zbierky"}),e.jsxs("div",{style:{fontSize:"22px",fontWeight:"bold",color:l?"#f8fafc":"#0f172a"},children:["‚Ç¨",s.currentValue.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:["Zmena (",ye.find(f=>f.key===b)?.label,")"]}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:n?"#10b981":"#ef4444"},children:[n?"+":"",s.change.toFixed(2)," ‚Ç¨",e.jsxs("span",{style:{fontSize:"12px",marginLeft:"4px"},children:["(",n?"+":"",s.changePercent.toFixed(1),"%)"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"V zbierke"}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:"#667eea"},children:[s.cardCount," ks"]})]}),s.soldCount>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"Realizovan√Ω zisk"}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:s.realizedProfit>=0?"#10b981":"#ef4444"},children:[s.realizedProfit>=0?"+":"",s.realizedProfit.toFixed(2)," ‚Ç¨"]})]})]})]}),e.jsx($e,{width:"100%",height:300,children:e.jsxs(nt,{data:k,margin:{top:10,right:20,left:0,bottom:5},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:p,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:p,stopOpacity:0})]})}),e.jsx(Be,{strokeDasharray:"3 3",stroke:U}),e.jsx(Le,{dataKey:"dateFormatted",stroke:A,style:{fontSize:"10px"},tick:{fill:A},interval:"preserveStartEnd"}),e.jsx(Ue,{stroke:A,style:{fontSize:"11px"},tick:{fill:A},tickFormatter:f=>`‚Ç¨${f.toFixed(0)}`}),e.jsx(Ee,{content:e.jsx(B,{})}),e.jsx(st,{type:"monotone",dataKey:"hodnota",stroke:p,strokeWidth:2,fillOpacity:1,fill:"url(#colorValue)"}),k.filter(f=>f.hasPurchase).map((f,m)=>e.jsx(Re,{x:f.dateFormatted,y:f.hodnota,r:5,fill:"#10b981",stroke:"white",strokeWidth:2},`purchase-${m}`)),k.filter(f=>f.hasSale).map((f,m)=>e.jsx(Re,{x:f.dateFormatted,y:f.hodnota,r:5,fill:"#ef4444",stroke:"white",strokeWidth:2},`sale-${m}`))]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"20px",marginTop:"12px",fontSize:"12px",color:"#94a3b8"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#10b981"}}),"N√°kup"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#ef4444"}}),"Predaj"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"12px",marginTop:"16px",paddingTop:"16px",borderTop:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"Celkom investovan√©"}),e.jsxs("div",{style:{fontSize:"14px",fontWeight:"600"},children:["‚Ç¨",s.totalInvested.toFixed(2)]})]}),s.soldCount>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:["Predan√© (",s.soldCount," ks)"]}),e.jsxs("div",{style:{fontSize:"14px",fontWeight:"600"},children:["‚Ç¨",s.totalSold.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"Priem. cena karty"}),e.jsxs("div",{style:{fontSize:"14px",fontWeight:"600"},children:["‚Ç¨",s.cardCount>0?(s.currentValue/s.cardCount).toFixed(2):"0.00"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"Z√°znamov"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:k.length})]})]})]})}function Ie({priceHistory:d=[],darkMode:l=!1}){const{t:y,language:o}=Ae();if(!d||d.length===0)return e.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:l?"#94a3b8":"#64748b",background:l?"#1e293b":"#f8fafc",borderRadius:"12px",border:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:"üìä"}),e.jsx("p",{style:{margin:0,fontSize:"14px"},children:y("chart.noData")}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"12px",color:"#94a3b8"},children:y("chart.noDataHint")})]});const L=o==="en"?"en-GB":o==="cz"?"cs-CZ":"sk-SK",C=d.map(n=>{const p=n.date?.toDate?n.date.toDate():new Date(n.date);return{date:p.toLocaleDateString(L,{day:"2-digit",month:"short",year:"numeric"}),cena:n.price,timestamp:p.getTime()}}).sort((n,p)=>n.timestamp-p.timestamp),S=C[0]?.cena||0,v=(C[C.length-1]?.cena||0)-S,W=S>0?(v/S*100).toFixed(1):0,i=v>=0,R=i?"#10b981":"#ef4444",k=l?"#334155":"#e2e8f0",s=l?"#cbd5e1":"#475569";return e.jsxs("div",{style:{background:l?"#1e293b":"white",borderRadius:"12px",padding:"20px",border:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"16px",borderBottom:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"16px",fontWeight:"600"},children:y("chart.title")}),e.jsxs("p",{style:{margin:0,fontSize:"12px",color:"#94a3b8"},children:[C.length," ",y("chart.records")]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:i?"#10b981":"#ef4444",marginBottom:"4px"},children:[i?"+":"",v.toFixed(2)," ‚Ç¨"]}),e.jsxs("div",{style:{fontSize:"13px",color:i?"#10b981":"#ef4444",fontWeight:"500"},children:[i?"+":"",W,"%"]})]})]}),e.jsx($e,{width:"100%",height:250,children:e.jsxs(rt,{data:C,margin:{top:5,right:20,left:0,bottom:5},children:[e.jsx(Be,{strokeDasharray:"3 3",stroke:k}),e.jsx(Le,{dataKey:"date",stroke:s,style:{fontSize:"11px"},tick:{fill:s}}),e.jsx(Ue,{stroke:s,style:{fontSize:"11px"},tick:{fill:s},tickFormatter:n=>`‚Ç¨${n.toFixed(0)}`}),e.jsx(Ee,{contentStyle:{background:l?"#334155":"white",border:`1px solid ${l?"#475569":"#e2e8f0"}`,borderRadius:"8px",fontSize:"13px"},labelStyle:{color:s,fontWeight:"600"},formatter:n=>[`‚Ç¨${n.toFixed(2)}`,y("chart.price")]}),e.jsx(at,{wrapperStyle:{fontSize:"12px"},iconType:"line"}),e.jsx(lt,{type:"monotone",dataKey:"cena",stroke:R,strokeWidth:2,dot:{fill:R,r:4},activeDot:{r:6},name:y("chart.priceLabel")})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginTop:"16px",paddingTop:"16px",borderTop:`1px solid ${l?"#334155":"#e2e8f0"}`},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"Minimum"}),e.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",color:"#ef4444"},children:["‚Ç¨",Math.min(...C.map(n=>n.cena)).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",marginBottom:"4px"},children:"Maximum"}),e.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",color:"#10b981"},children:["‚Ç¨",Math.max(...C.map(n=>n.cena)).toFixed(2)]})]})]})]})}function mt({user:d,isOpen:l,onClose:y,onUpdate:o,isMockAuth:L=!1}){const[C,S]=a.useState(d.displayName||""),[b,v]=a.useState(d.photoURL||""),[W,i]=a.useState(!1),[R,k]=a.useState(null),s=tt(),n=async()=>{if(!C.trim()){k(V("profile.error.empty",s));return}if(L){o({displayName:C.trim(),photoURL:b.trim()}),y();return}i(!0),k(null);try{const p=Y(T,"users",d.uid);await Ve(p,{displayName:C.trim(),photoURL:b.trim()||null,email:d.email,updatedAt:new Date,createdAt:new Date},{merge:!0}),console.log("Profile saved successfully"),o({displayName:C.trim(),photoURL:b.trim()}),y()}catch(p){console.error("Error saving profile:",p),k(`${s==="en"?"Failed to save profile":s==="cz"?"Nepoda≈ôilo se ulo≈æit profil":"Nepodarilo sa ulo≈æi≈• profil"}: ${p.message}`)}finally{i(!1)}};return l?e.jsx("div",{style:w.overlay,onClick:y,children:e.jsxs("div",{style:w.modal,onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{style:w.header,children:[e.jsxs("h2",{style:w.title,children:["‚úèÔ∏è ",V("profile.title",s)]}),e.jsx("button",{onClick:y,style:w.closeButton,children:"‚úï"})]}),e.jsxs("div",{style:w.content,children:[e.jsxs("div",{style:w.field,children:[e.jsxs("label",{style:w.label,children:[V("profile.name",s)," ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:C,onChange:p=>S(p.target.value),placeholder:s==="en"?"Enter name":s==="cz"?"Zadejte jm√©no":"Zadaj meno",style:w.input,maxLength:50}),e.jsx("div",{style:w.hint,children:V("profile.name.hint",s)})]}),e.jsxs("div",{style:w.field,children:[e.jsx("label",{style:w.label,children:V("profile.photo",s)}),e.jsx("input",{type:"url",value:b,onChange:p=>v(p.target.value),placeholder:"https://example.com/avatar.jpg",style:w.input}),e.jsx("div",{style:w.hint,children:V("profile.photo.hint",s)})]}),(C||b)&&e.jsxs("div",{style:w.preview,children:[e.jsx("div",{style:w.previewLabel,children:V("profile.preview",s)}),e.jsxs("div",{style:w.previewCard,children:[e.jsxs("div",{style:w.avatar,children:[b?e.jsx("img",{src:b,alt:C,style:w.avatarImage,onError:p=>{p.target.style.display="none",p.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{style:{...w.avatarPlaceholder,display:b?"none":"flex"},children:C.charAt(0).toUpperCase()})]}),e.jsx("div",{style:w.previewName,children:C||"Anonym"})]})]}),R&&e.jsxs("div",{style:w.error,children:["‚ùå ",R]})]}),e.jsxs("div",{style:w.footer,children:[e.jsx("button",{onClick:y,style:w.cancelButton,disabled:W,children:V("profile.cancel",s)}),e.jsx("button",{onClick:n,style:w.saveButton,disabled:W,children:W?`‚è≥ ${V("profile.saving",s)}`:`üíæ ${V("profile.save",s)}`})]})]})}):null}const w={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},modal:{background:"white",borderRadius:"16px",maxWidth:"500px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 24px",borderBottom:"1px solid #e2e8f0"},title:{margin:0,fontSize:"20px",fontWeight:"700",color:"#0f172a"},closeButton:{background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s"},content:{padding:"24px"},field:{marginBottom:"20px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:"#0f172a",marginBottom:"8px"},input:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",transition:"border-color 0.2s",boxSizing:"border-box"},hint:{fontSize:"12px",color:"#64748b",marginTop:"6px"},preview:{marginTop:"24px",padding:"16px",background:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},previewLabel:{fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px"},previewCard:{display:"flex",alignItems:"center",gap:"12px"},avatar:{width:"50px",height:"50px",borderRadius:"50%",overflow:"hidden",border:"2px solid #e2e8f0",position:"relative"},avatarImage:{width:"100%",height:"100%",objectFit:"cover"},avatarPlaceholder:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontSize:"20px",fontWeight:"700"},previewName:{fontSize:"16px",fontWeight:"600",color:"#0f172a"},error:{padding:"12px",background:"#fee2e2",color:"#991b1b",borderRadius:"8px",fontSize:"14px",marginTop:"16px"},footer:{display:"flex",gap:"12px",padding:"20px 24px",borderTop:"1px solid #e2e8f0"},cancelButton:{flex:1,padding:"12px 24px",background:"#f1f5f9",color:"#475569",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},saveButton:{flex:1,padding:"12px 24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"}};function zt({user:d}){const y=ve(),{t:o}=Ae(),L=[{id:"mock-notif-1",type:"system",title:"Mock notifik√°cia",message:"Testovac√≠ z√°znam pre E2E.",createdAt:{toDate:()=>new Date(Date.now()-1e3*60*60)}}],C=()=>`mock-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,[S,b]=a.useState([]),[v,W]=a.useState([]),[i,R]=a.useState(()=>localStorage.getItem("darkMode")==="true"),[k,s]=a.useState(!1),[n,p]=a.useState(null),[U,A]=a.useState(""),[B,f]=a.useState("all"),[m,z]=a.useState(!1),[H,q]=a.useState(()=>window.innerWidth>=768?"table":"list"),[g,M]=a.useState(()=>window.innerWidth>=768),[c,F]=a.useState({item:"",buy:"",current:"",status:"zbierka",note:"",imageFile:null,imageUrl:"",soldPrice:""}),[u,j]=a.useState(!1),[D,X]=a.useState(0),[E,te]=a.useState(!1),[P,se]=a.useState(null),[ke,fe]=a.useState(!1),[Oe,ie]=a.useState(!1),[$,Se]=a.useState(null),[O,he]=a.useState(""),[ze,re]=a.useState(null),[Ye,oe]=a.useState(!1),[K,we]=a.useState(null),[Z,Ce]=a.useState({displayName:d.displayName,photoURL:d.photoURL}),[Ke,_e]=a.useState("standard"),[ae,qe]=a.useState(!0),[ge,Xe]=a.useState(!0);a.useEffect(()=>{localStorage.setItem("darkMode",i)},[i]),a.useEffect(()=>{const t=()=>{const r=window.innerWidth>=768;M(r)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),a.useEffect(()=>{if(!d)return;(async()=>{try{const r=await Fe(Y(T,"users",d.uid));if(r.exists()){const h=r.data();_e(h.role||"standard")}}catch(r){console.error("Error loading user data:",r)}})()},[d]),a.useEffect(()=>{if(!d)return;const t=xe(J(T,"cards"),ee("userId","==",d.uid)),r=pe(t,h=>{const N=h.docs.map(_=>({id:_.id,..._.data()}));b(N)});return()=>r()},[d]),a.useEffect(()=>{},[!1]),a.useEffect(()=>{if(!d)return;const t=xe(J(T,"notifications"),ee("userId","==",d.uid),ee("read","==",!1),Me("createdAt","desc"),He(10)),r=pe(t,h=>{X(h.size)});return()=>r()},[d]),a.useEffect(()=>{if(!d)return;(async()=>{const N=Y(T,"users",d.uid);(await Fe(N)).exists()||(console.log("Creating user document for:",d.uid),await Ve(N,{email:d.email,displayName:d.displayName||d.email?.split("@")[0]||"Anonym",photoURL:d.photoURL||null,createdAt:new Date,updatedAt:new Date}))})();const r=Y(T,"users",d.uid),h=pe(r,N=>{if(N.exists()){const _=N.data();Ce({displayName:_.displayName||d.displayName||"Anonym",photoURL:_.photoURL||d.photoURL||null})}});return()=>h()},[d]),a.useEffect(()=>{let t=S;if(U){const r=U.toLowerCase();t=t.filter(h=>(h.item||"").toLowerCase().includes(r)||(h.note||"").toLowerCase().includes(r)||(h.status||"").toLowerCase().includes(r))}B!=="all"&&(t=t.filter(r=>r.status===B)),m&&(t=t.filter(r=>r.imageUrl)),W(t)},[S,U,B,m]);const le=S.filter(t=>t.status==="zbierka"),de=S.filter(t=>t.status==="predan√°"),Ze=le.reduce((t,r)=>t+(parseFloat(r.buy)||0),0),ue=le.reduce((t,r)=>t+(parseFloat(r.current)||0),0),G=ue-Ze,Q=de.reduce((t,r)=>t+(parseFloat(r.soldPrice)||0),0)-de.reduce((t,r)=>t+(parseFloat(r.buy)||0),0),I=t=>t==null||t===""?"":Number(t).toLocaleString("sk-SK",{minimumFractionDigits:2,maximumFractionDigits:2}),Ge=async()=>{try{await pt(Te)}catch(t){y.error("Chyba pri odhl√°sen√≠: "+t.message)}},We=()=>{p(null),F({item:"",buy:"",current:"",status:"zbierka",note:"",imageFile:null,imageUrl:"",soldPrice:""}),s(!0)},ce=t=>{p(t),F({item:t.item||"",buy:t.buy||"",current:t.current||"",status:t.status||"zbierka",note:t.note||"",imageFile:null,imageUrl:t.imageUrl||"",soldPrice:t.soldPrice||""}),s(!0)},Qe=async t=>{if(t.preventDefault(),!c.item.trim()){y.warning('Vypl≈à aspo≈à pole "Polo≈æka"');return}try{let r=c.imageUrl;if(c.imageFile){const N=xt(ot,`cards/${d.uid}/${Date.now()}_${c.imageFile.name}`);await ft(N,c.imageFile),r=await ht(N)}const h={item:c.item.trim(),buy:c.buy?parseFloat(c.buy):null,current:c.current?parseFloat(c.current):null,status:c.status,note:c.note.trim(),imageUrl:r,userId:d.uid,updatedAt:ne()};if(c.status==="predan√°"){const N=n&&n.status==="zbierka",_=!n&&c.status==="predan√°";(N||_||!n?.soldAt)&&(h.soldAt=ne()),h.soldPrice=c.soldPrice?parseFloat(c.soldPrice):c.current?parseFloat(c.current):null}else n&&n.status==="predan√°"&&(h.soldAt=null,h.soldPrice=null);n?await je(Y(T,"cards",n.id),h):await Ne(J(T,"cards"),{...h,createdAt:ne()}),s(!1)}catch(r){y.error("Chyba pri ukladan√≠: "+r.message)}},be=t=>{we(t),oe(!0)},Je=async()=>{if(K)try{await gt(Y(T,"cards",K.id)),y.success("Karta bola zmazan√°"),oe(!1),we(null)}catch(t){y.error("Chyba pri mazan√≠: "+t.message)}},me=t=>{Se(t),he(t.current||""),ie(!0)},et=async()=>{if(!$)return;const t=O?parseFloat(O):$.current||0;try{await je(Y(T,"cards",$.id),{status:"predan√°",soldPrice:t,soldAt:ne(),updatedAt:ne()}),y.success(`Karta predan√° za ‚Ç¨${t.toFixed(2)}`),ie(!1),Se(null),he("")}catch(r){y.error("Chyba pri predaji: "+r.message)}},Pe=t=>{const r=t.target.files?.[0];r&&F({...c,imageFile:r})},x={container:{fontFamily:"system-ui, -apple-system, Arial",padding:g?"24px":"12px",backgroundColor:i?"#0f172a":"#f8fafc",color:i?"#f8fafc":"#0f172a",minHeight:"100vh",transition:"all 0.3s"},button:{padding:"10px 16px",minHeight:"44px",borderRadius:"12px",border:"1px solid #cbd5e1",background:"#fff",cursor:"pointer",transition:"all 0.2s",fontSize:"14px",fontWeight:"500"},primaryButton:{background:"#1d4ed8",color:"#fff",borderColor:"#1d4ed8"}};return e.jsxs("div",{style:x.container,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("h1",{style:{margin:0,fontSize:g?"26px":"20px",flexBasis:g?"auto":"100%"},children:["üéØ ",o("manager.title")]}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[g?e.jsxs("button",{onClick:()=>fe(!0),style:{...x.button,padding:"8px 12px",display:"flex",alignItems:"center",gap:"6px"},title:"Upravi≈• profil",children:[Z.photoURL?e.jsx("img",{src:Z.photoURL,alt:Z.displayName,style:{width:"24px",height:"24px",borderRadius:"50%",objectFit:"cover"}}):e.jsx("span",{children:"üë§"}),e.jsx("span",{style:{fontSize:"14px"},children:Z.displayName})]}):e.jsx("button",{onClick:()=>fe(!0),style:{...x.button,width:"44px",height:"44px",padding:"0"},title:"Upravi≈• profil",children:"üë§"}),e.jsx("button",{onClick:Ge,style:{...x.button,border:"1px solid #fecaca",background:"#fee2e2",color:"#991b1b"},children:g?"Odhl√°si≈•":"üö™"}),e.jsxs("button",{onClick:()=>j(!0),style:{...x.button,width:"44px",height:"44px",padding:"0",background:"#f0f9ff",position:"relative"},title:"Notifik√°cie",children:["üîî",D>0&&e.jsx("span",{style:{position:"absolute",top:"-4px",right:"-4px",background:"#ef4444",color:"white",borderRadius:"50%",width:"20px",height:"20px",fontSize:"11px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",border:"2px solid "+(i?"#0f172a":"#f8fafc")},children:D>9?"9+":D})]}),e.jsx(it,{darkMode:i}),Ke==="admin"&&e.jsx("button",{onClick:()=>window.open("/admin_panel.html","_blank"),style:{...x.button,background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",color:"white",fontWeight:"600",border:"none",boxShadow:"0 2px 8px rgba(251, 191, 36, 0.3)"},title:"Admin Panel",children:g?"üëë Admin":"üëë"}),e.jsx("button",{onClick:()=>R(!i),style:{...x.button,width:"44px",height:"44px",padding:"0",background:"#eef2ff"},title:"Prepn√∫≈• tmav√Ω re≈æim",children:i?"‚òÄÔ∏è":"üåô"})]})]}),e.jsx("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"12px",marginBottom:"16px",overflow:"hidden"},children:g?e.jsxs("div",{style:{padding:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold"},children:[I(ue)," ‚Ç¨"]}),e.jsx("div",{style:{fontSize:"11px",opacity:.85},children:o("manager.stats.value")})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:G>=0?"#10b981":"#ef4444"},children:[G>=0?"+":"",I(G)," ‚Ç¨"]}),e.jsx("div",{style:{fontSize:"11px",opacity:.85},children:o("manager.stats.unrealized")})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:Q>=0?"#10b981":"#ef4444"},children:[Q>=0?"+":"",I(Q)," ‚Ç¨"]}),e.jsx("div",{style:{fontSize:"11px",opacity:.85},children:o("manager.stats.realized")})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"28px",fontWeight:"bold"},children:le.length}),e.jsx("div",{style:{fontSize:"11px",opacity:.85},children:o("manager.stats.inCollection")})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"28px",fontWeight:"bold"},children:de.length}),e.jsx("div",{style:{fontSize:"11px",opacity:.85},children:o("manager.stats.sold")})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{onClick:()=>Xe(!ge),style:{padding:"12px 16px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold"},children:[I(ue)," ‚Ç¨"]}),e.jsx("div",{style:{fontSize:"11px",opacity:.85},children:o("manager.stats.value")})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:G>=0?"#10b981":"#ef4444"},children:[G>=0?"+":"",I(G)," ‚Ç¨"]}),e.jsx("div",{style:{fontSize:"11px",opacity:.85},children:o("manager.stats.unrealized")})]})]}),e.jsx("span",{style:{fontSize:"16px",opacity:.8,transition:"transform 0.2s",transform:ge?"rotate(180deg)":"rotate(0deg)"},children:"‚ñº"})]}),ge&&e.jsxs("div",{style:{padding:"0 16px 12px",display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",textAlign:"center",borderTop:"1px solid rgba(255,255,255,0.2)",paddingTop:"12px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:Q>=0?"#10b981":"#ef4444"},children:[Q>=0?"+":"",I(Q)," ‚Ç¨"]}),e.jsx("div",{style:{fontSize:"11px",opacity:.85,marginTop:"4px"},children:o("manager.stats.realized")})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"bold"},children:le.length}),e.jsx("div",{style:{fontSize:"11px",opacity:.85,marginTop:"4px"},children:o("manager.stats.inCollection")})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"bold"},children:de.length}),e.jsx("div",{style:{fontSize:"11px",opacity:.85,marginTop:"4px"},children:o("manager.stats.sold")})]})]})]})}),e.jsx("div",{style:{marginBottom:"16px"},children:g?e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"stretch"},children:[e.jsx("input",{type:"text",placeholder:o("manager.search"),value:U,onChange:t=>A(t.target.value),style:{...x.button,flex:5,minWidth:0,background:i?"#1e293b":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"16px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1,minWidth:0},children:[e.jsxs("select",{value:B,onChange:t=>f(t.target.value),style:{...x.button,width:"100%",background:i?"#1e293b":"#fff",color:i?"#f8fafc":"#0f172a",padding:"8px 12px",minHeight:"0",height:"auto"},children:[e.jsx("option",{value:"all",children:o("manager.filter.all")}),e.jsx("option",{value:"zbierka",children:o("manager.filter.collection")}),e.jsx("option",{value:"predan√°",children:o("manager.filter.sold")})]}),e.jsxs("select",{value:m?"photo":"all",onChange:t=>z(t.target.value==="photo"),style:{...x.button,width:"100%",background:i?"#1e293b":"#fff",color:i?"#f8fafc":"#0f172a",padding:"8px 12px",minHeight:"0",height:"auto"},children:[e.jsx("option",{value:"all",children:o("manager.filter.allPhotos")}),e.jsx("option",{value:"photo",children:o("manager.filter.withPhoto")})]})]}),e.jsx("button",{onClick:We,style:{...x.button,...x.primaryButton,flex:1,minWidth:0},children:o("manager.add")}),e.jsx("div",{style:{display:"flex",gap:"4px",flex:1,minWidth:0,background:i?"#334155":"#f3f4f6",borderRadius:"12px",padding:"4px"},children:[{mode:"list",icon:"üìã",title:o("manager.view.list")},{mode:"cards",icon:"üèí",title:o("manager.view.tiles")},{mode:"gallery",icon:"üñºÔ∏è",title:o("manager.view.gallery")},{mode:"table",icon:"üìä",title:o("manager.view.table")}].map(({mode:t,icon:r,title:h})=>e.jsx("button",{onClick:()=>q(t),title:h,style:{flex:1,minHeight:"44px",padding:"10px 2px",border:"none",borderRadius:"8px",background:H===t?"#667eea":"transparent",color:H===t?"white":i?"#f8fafc":"#64748b",cursor:"pointer",fontSize:"16px",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},children:r},t))}),e.jsx("button",{onClick:()=>te(!E),style:{...x.button,flex:1,minWidth:0,background:E?"#667eea":i?"#334155":"#f3f4f6",color:E?"white":i?"#f8fafc":"#0f172a"},children:E?`üìâ ${o("manager.chart.hide")}`:`üìà ${o("manager.chart.show")}`}),e.jsx("div",{style:{flex:1,minWidth:0},children:e.jsx(De,{onImportComplete:()=>{}})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px",alignItems:"stretch"},children:[e.jsx("input",{type:"text",placeholder:o("manager.search"),value:U,onChange:t=>A(t.target.value),style:{...x.button,flex:1,minWidth:0,background:i?"#1e293b":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"16px"}}),e.jsx("button",{onClick:We,style:{...x.button,...x.primaryButton,flex:"0 0 auto",padding:"12px 16px"},children:"+"}),e.jsx("button",{onClick:()=>qe(!ae),style:{...x.button,flex:"0 0 auto",background:ae?"#667eea":i?"#334155":"#f3f4f6",color:ae?"white":i?"#f8fafc":"#64748b",padding:"12px 14px"},children:"üîß"})]}),ae&&e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"stretch"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:"1 1 calc(50% - 4px)"},children:[e.jsxs("select",{value:B,onChange:t=>f(t.target.value),style:{...x.button,width:"100%",flex:1,background:i?"#1e293b":"#fff",color:i?"#f8fafc":"#0f172a"},children:[e.jsx("option",{value:"all",children:o("manager.filter.all")}),e.jsx("option",{value:"zbierka",children:o("manager.filter.collection")}),e.jsx("option",{value:"predan√°",children:o("manager.filter.sold")})]}),e.jsxs("select",{value:m?"photo":"all",onChange:t=>z(t.target.value==="photo"),style:{...x.button,width:"100%",flex:1,background:i?"#1e293b":"#fff",color:i?"#f8fafc":"#0f172a"},children:[e.jsx("option",{value:"all",children:o("manager.filter.allPhotos")}),e.jsx("option",{value:"photo",children:o("manager.filter.withPhoto")})]})]}),e.jsx("div",{style:{display:"flex",gap:"4px",flex:"1 1 calc(50% - 4px)",minWidth:0,flexWrap:"wrap",background:i?"#334155":"#f3f4f6",borderRadius:"12px",padding:"4px"},children:[{mode:"list",icon:"üìã",title:o("manager.view.list")},{mode:"cards",icon:"üèí",title:o("manager.view.tiles")},{mode:"gallery",icon:"üñºÔ∏è",title:o("manager.view.gallery")},{mode:"table",icon:"üìä",title:o("manager.view.table")}].map(({mode:t,icon:r,title:h})=>e.jsx("button",{onClick:()=>q(t),title:h,style:{flex:1,minWidth:"44px",minHeight:"44px",padding:"10px 8px",border:"none",borderRadius:"8px",background:H===t?"#667eea":"transparent",color:H===t?"white":i?"#f8fafc":"#64748b",cursor:"pointer",fontSize:"18px",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},children:r},t))}),e.jsx("button",{onClick:()=>te(!E),style:{...x.button,background:E?"#667eea":i?"#334155":"#f3f4f6",color:E?"white":i?"#f8fafc":"#0f172a",flex:"1 1 calc(50% - 4px)",minWidth:0},children:E?`üìâ ${o("manager.chart.hide")}`:`üìà ${o("manager.chart.show")}`}),e.jsx("div",{style:{flex:"1 1 calc(50% - 4px)",minWidth:0},children:e.jsx(De,{onImportComplete:()=>{}})})]})]})}),E&&e.jsx("div",{style:{marginBottom:"16px"},children:e.jsx(bt,{user:d,darkMode:i,isMockAuth:!1})}),H==="cards"?e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:v.length===0?e.jsx("div",{style:{gridColumn:"1 / -1",padding:"40px",textAlign:"center",color:"#64748b"},children:S.length===0?`üìã ${o("manager.empty")}`:`üîç ${o("manager.noResults")}`}):v.map(t=>e.jsxs("div",{className:"card-item",style:{background:i?"#1e293b":"#fff",border:`1px solid ${i?"#334155":"#e2e8f0"}`,borderRadius:"12px",padding:"16px",display:"flex",flexDirection:"column",gap:"12px"},children:[t.imageUrl&&e.jsx("img",{src:t.imageUrl,alt:"foto",style:{width:"100%",height:"180px",objectFit:"contain",borderRadius:"8px",cursor:"pointer",background:i?"#0f172a":"#f8fafc"},onClick:r=>{r.stopPropagation(),re(t.imageUrl)}}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"bold"},children:t.item}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"13px"},children:[t.buy!=null&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"#64748b"},children:o("manager.card.buy")}),e.jsxs("div",{style:{fontWeight:"600"},children:[I(t.buy)," ‚Ç¨"]})]}),t.current!=null&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"#64748b"},children:o("manager.card.current")}),e.jsxs("div",{style:{fontWeight:"600"},children:[I(t.current)," ‚Ç¨"]})]}),t.status==="predan√°"&&t.soldPrice!=null&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"#64748b"},children:o("manager.card.soldFor")}),e.jsxs("div",{style:{fontWeight:"600"},children:[I(t.soldPrice)," ‚Ç¨"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#64748b"},children:o("manager.card.status")}),e.jsx("div",{style:{fontWeight:"600",padding:"4px 8px",borderRadius:"6px",display:"inline-block",background:t.status==="zbierka"?"#d1fae5":"#fee2e2",color:t.status==="zbierka"?"#065f46":"#991b1b"},children:t.status==="zbierka"?o("manager.filter.collection"):o("manager.filter.sold")})]})]}),t.note&&e.jsx("div",{style:{fontSize:"13px",color:"#64748b",fontStyle:"italic"},children:t.note}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[e.jsx("button",{onClick:()=>ce(t),style:{...x.button,flex:"1",background:"#eef2ff",border:"1px solid #c7d2fe",color:"#1e3a8a"},children:o("manager.actions.edit")}),t.status==="zbierka"&&e.jsx("button",{onClick:()=>me(t),style:{...x.button,flex:"1",background:"#d1fae5",border:"1px solid #6ee7b7",color:"#065f46"},children:o("manager.actions.sell")}),e.jsx("button",{onClick:()=>be(t),style:{...x.button,flex:"1",background:"#fee2e2",color:"#991b1b",border:"1px solid #fecaca"},children:o("manager.actions.delete")})]}),t.priceHistory&&t.priceHistory.length>0&&e.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:`1px solid ${i?"#334155":"#e2e8f0"}`},children:[e.jsx("button",{onClick:()=>se(P?.id===t.id?null:t),style:{...x.button,width:"100%",background:P?.id===t.id?"#667eea":i?"#334155":"#f3f4f6",color:P?.id===t.id?"white":i?"#f8fafc":"#0f172a",fontSize:"12px",padding:"8px"},children:P?.id===t.id?`üìâ ${o("manager.actions.hideChart")}`:`üìà ${o("manager.actions.showChart")}`}),P?.id===t.id&&e.jsx("div",{style:{marginTop:"12px"},children:e.jsx(Ie,{priceHistory:t.priceHistory,darkMode:i})})]})]},t.id))}):H==="list"?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:v.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#64748b",background:i?"#1e293b":"#fff",borderRadius:"12px",border:`1px solid ${i?"#334155":"#e2e8f0"}`},children:S.length===0?`üìã ${o("manager.empty")}`:`üîç ${o("manager.noResults")}`}):v.map((t,r)=>e.jsxs("div",{onClick:()=>ce(t),style:{background:i?"#1e293b":"#fff",border:`1px solid ${i?"#334155":"#e2e8f0"}`,borderRadius:"10px",padding:"12px 14px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:h=>{h.currentTarget.style.background=i?"#334155":"#f8fafc",h.currentTarget.style.borderColor=i?"#475569":"#cbd5e1"},onMouseLeave:h=>{h.currentTarget.style.background=i?"#1e293b":"#fff",h.currentTarget.style.borderColor=i?"#334155":"#e2e8f0"},children:[e.jsxs("span",{style:{fontSize:"12px",color:"#64748b",minWidth:"24px"},children:[r+1,"."]}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.item}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"2px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[t.buy!=null&&e.jsxs("span",{children:[o("manager.card.buy")," ",I(t.buy),"‚Ç¨"]}),t.current!=null&&e.jsxs("span",{style:{fontWeight:"600",color:i?"#f8fafc":"#0f172a"},children:[o("manager.card.current")," ",I(t.current),"‚Ç¨"]}),t.status==="predan√°"&&t.soldPrice!=null&&e.jsxs("span",{style:{color:"#10b981"},children:[o("manager.card.soldFor")," ",I(t.soldPrice),"‚Ç¨"]})]})]}),e.jsx("span",{style:{padding:"4px 8px",borderRadius:"6px",fontSize:"11px",fontWeight:"600",background:t.status==="zbierka"?"#d1fae5":"#fee2e2",color:t.status==="zbierka"?"#065f46":"#991b1b",whiteSpace:"nowrap"},children:t.status==="zbierka"?o("manager.filter.collection"):o("manager.filter.sold")}),e.jsxs("div",{style:{display:"flex",gap:"6px"},onClick:h=>h.stopPropagation(),children:[t.status==="zbierka"&&e.jsx("button",{onClick:()=>me(t),style:{...x.button,padding:"6px 10px",minHeight:"32px",fontSize:"12px",background:"#d1fae5",border:"1px solid #6ee7b7",color:"#065f46"},children:"üí∞"}),e.jsx("button",{onClick:()=>be(t),style:{...x.button,padding:"6px 10px",minHeight:"32px",fontSize:"12px",background:"#fee2e2",color:"#991b1b",border:"1px solid #fecaca"},children:"üóëÔ∏è"})]})]},t.id))}):H==="gallery"?e.jsx("div",{style:{display:"grid",gridTemplateColumns:g?"repeat(auto-fill, minmax(180px, 1fr))":"repeat(auto-fill, minmax(140px, 1fr))",gap:"12px"},children:v.length===0?e.jsx("div",{style:{gridColumn:"1 / -1",padding:"40px",textAlign:"center",color:"#64748b",background:i?"#1e293b":"#fff",borderRadius:"12px",border:`1px solid ${i?"#334155":"#e2e8f0"}`},children:S.length===0?`üìã ${o("manager.empty")}`:`üîç ${o("manager.noResults")}`}):v.map(t=>e.jsxs("div",{style:{background:i?"#1e293b":"#fff",border:`1px solid ${i?"#334155":"#e2e8f0"}`,borderRadius:"12px",overflow:"hidden",cursor:"pointer",transition:"all 0.2s",position:"relative"},onClick:()=>ce(t),onMouseEnter:r=>{r.currentTarget.style.borderColor="#667eea",r.currentTarget.style.transform="scale(1.02)"},onMouseLeave:r=>{r.currentTarget.style.borderColor=i?"#334155":"#e2e8f0",r.currentTarget.style.transform="scale(1)"},children:[t.imageUrl?e.jsx("div",{style:{position:"relative",paddingTop:"100%",background:i?"#0f172a":"#f8fafc"},children:e.jsx("img",{src:t.imageUrl,alt:t.item,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain"}})}):e.jsx("div",{style:{paddingTop:"100%",background:i?"#334155":"#f1f5f9",position:"relative"},children:e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"32px",opacity:.3},children:"üèí"})}),e.jsxs("div",{style:{padding:"10px"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:"4px"},children:t.item}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:"700",color:i?"#10b981":"#059669"},children:t.current!=null?`${I(t.current)}‚Ç¨`:"‚Äî"}),e.jsx("span",{style:{padding:"2px 6px",borderRadius:"4px",fontSize:"9px",fontWeight:"600",background:t.status==="zbierka"?"#d1fae5":"#fee2e2",color:t.status==="zbierka"?"#065f46":"#991b1b"},children:t.status==="zbierka"?o("manager.filter.collection"):o("manager.filter.sold")})]})]})]},t.id))}):e.jsxs("div",{style:{position:"relative"},children:[!g&&e.jsx("div",{style:{position:"absolute",right:0,top:0,bottom:0,width:"40px",background:`linear-gradient(to right, transparent, ${i?"rgba(30, 41, 59, 0.9)":"rgba(255, 255, 255, 0.9)"})`,pointerEvents:"none",zIndex:5,borderRadius:"0 12px 12px 0",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:"16px",opacity:.6},children:"‚Üí"})}),e.jsx("div",{style:{overflow:"auto",maxHeight:"67vh",borderRadius:"12px",border:`1px solid ${i?"#334155":"#e2e8f0"}`,background:i?"#1e293b":"#fff"},children:e.jsxs("table",{style:{width:"100%",minWidth:g?"auto":"800px",borderCollapse:"collapse",fontSize:"14px",background:i?"#1e293b":"#fff"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:i?"#334155":"#f8fafc"},children:[e.jsx("th",{style:{padding:"10px 12px",textAlign:"left",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:"#"}),e.jsx("th",{style:{padding:"10px 12px",textAlign:"left",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:o("manager.table.photo")}),e.jsx("th",{style:{padding:"10px 12px",textAlign:"left",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:o("manager.table.item")}),e.jsx("th",{style:{padding:"10px 12px",textAlign:"right",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:o("manager.table.buyPrice")}),e.jsx("th",{style:{padding:"10px 12px",textAlign:"right",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:o("manager.table.currentPrice")}),e.jsx("th",{style:{padding:"10px 12px",textAlign:"right",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:o("manager.table.soldPrice")}),e.jsx("th",{style:{padding:"10px 12px",textAlign:"left",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:o("manager.table.status")}),e.jsx("th",{style:{padding:"10px 12px",textAlign:"left",position:"sticky",top:0,background:i?"#334155":"#f8fafc",zIndex:10},children:o("manager.table.actions")})]})}),e.jsx("tbody",{children:v.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",style:{padding:"40px",textAlign:"center",color:"#64748b"},children:S.length===0?`üìã ${o("manager.empty")}`:`üîç ${o("manager.noResults")}`})}):v.map((t,r)=>e.jsxs("tr",{onClick:()=>ce(t),style:{borderBottom:`1px solid ${i?"#334155":"#f1f5f9"}`,cursor:"pointer",transition:"background 0.15s"},onMouseEnter:h=>h.currentTarget.style.background=i?"#334155":"#f8fafc",onMouseLeave:h=>h.currentTarget.style.background="transparent",children:[e.jsx("td",{style:{padding:"10px 12px"},children:r+1}),e.jsx("td",{style:{padding:"10px 12px"},children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:"foto",style:{width:"56px",height:"56px",objectFit:"contain",borderRadius:"10px",border:"1px solid #e5e7eb",background:i?"#0f172a":"#f8fafc"},onClick:h=>{h.stopPropagation(),re(t.imageUrl)}}):e.jsx("span",{style:{color:"#64748b"},children:"‚Äî"})}),e.jsx("td",{style:{padding:"10px 12px"},children:t.item}),e.jsx("td",{style:{padding:"10px 12px",textAlign:"right"},children:t.buy!=null?I(t.buy):""}),e.jsx("td",{style:{padding:"10px 12px",textAlign:"right"},children:t.current!=null?e.jsxs("span",{children:[I(t.current),t.ebayPriceSource&&e.jsx("span",{style:{marginLeft:"6px",fontSize:"14px"},title:"Cena z eBay",children:"üìä"})]}):""}),e.jsx("td",{style:{padding:"10px 12px",textAlign:"right"},children:t.status==="predan√°"&&t.soldPrice!=null?I(t.soldPrice):""}),e.jsx("td",{style:{padding:"10px 12px"},children:e.jsx("span",{style:{padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",background:t.status==="zbierka"?"#d1fae5":"#fee2e2",color:t.status==="zbierka"?"#065f46":"#991b1b"},children:t.status==="zbierka"?o("manager.filter.collection"):o("manager.filter.sold")})}),e.jsxs("td",{style:{padding:"10px 12px",whiteSpace:"nowrap"},onClick:h=>h.stopPropagation(),children:[t.status==="zbierka"&&e.jsx("button",{onClick:()=>me(t),style:{...x.button,background:"#d1fae5",border:"1px solid #6ee7b7",color:"#065f46",marginRight:"5px",padding:"8px 12px",minHeight:"36px"},children:"üí∞"}),e.jsx("button",{onClick:()=>be(t),style:{...x.button,background:"#fee2e2",color:"#991b1b",border:"1px solid #fecaca",padding:"8px 12px",minHeight:"36px"},children:"üóëÔ∏è"})]})]},t.id))})]})})]}),k&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(15, 23, 42, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:g?"20px":"12px"},onClick:()=>s(!1),children:e.jsxs("div",{className:"modal-content",style:{background:i?"#1e293b":"white",color:i?"#f8fafc":"#0f172a",borderRadius:"16px",width:"100%",maxWidth:g?"680px":"100%",maxHeight:g?"none":"calc(100vh - 24px)",overflowY:g?"visible":"auto",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.4)"},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{padding:g?"16px 24px":"14px 16px",borderBottom:`1px solid ${i?"#334155":"#e2e8f0"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("strong",{style:{fontSize:"18px"},children:o(n?"manager.modal.edit":"manager.modal.add")}),e.jsx("button",{onClick:()=>s(!1),style:{background:i?"#334155":"#f1f5f9",border:"none",borderRadius:"8px",cursor:"pointer",color:i?"#94a3b8":"#64748b",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:"‚úï"})]}),e.jsxs("form",{onSubmit:Qe,children:[e.jsxs("div",{style:{padding:g?"20px 24px":"16px",display:"flex",flexDirection:g?"row":"column",gap:g?"20px":"16px"},children:[e.jsx("div",{style:{flex:g?"0 0 160px":"none"},children:c.imageUrl||c.imageFile?e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{src:c.imageFile?URL.createObjectURL(c.imageFile):c.imageUrl,alt:"Preview",style:{width:g?"160px":"100%",height:g?"160px":"180px",objectFit:"contain",borderRadius:"12px",border:`1px solid ${i?"#334155":"#e2e8f0"}`,background:i?"#0f172a":"#f8fafc"}}),e.jsxs("label",{style:{position:"absolute",bottom:"8px",right:"8px",background:i?"#334155":"white",borderRadius:"8px",padding:"6px 10px",cursor:"pointer",fontSize:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:["üì∑ ",o("manager.modal.changePhoto"),e.jsx("input",{type:"file",accept:"image/*",onChange:Pe,style:{display:"none"}})]})]}):e.jsxs("label",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:g?"160px":"100%",height:g?"160px":"100px",border:`2px dashed ${i?"#334155":"#cbd5e1"}`,borderRadius:"12px",cursor:"pointer",background:i?"#0f172a":"#f8fafc",transition:"all 0.2s"},children:[e.jsx("span",{style:{fontSize:"28px",opacity:.5},children:"üì∑"}),e.jsx("span",{style:{fontSize:"12px",color:"#64748b",marginTop:"4px"},children:o("manager.modal.addPhoto")}),e.jsx("input",{type:"file",accept:"image/*",onChange:Pe,style:{display:"none"}})]})}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"14px",minWidth:0},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",display:"block",marginBottom:"6px"},children:[o("manager.modal.item")," *"]}),e.jsx("input",{type:"text",value:c.item,onChange:t=>F({...c,item:t.target.value}),placeholder:"napr. 2005 Upper Deck Young Guns #201 Crosby PSA 10",required:!0,style:{...x.button,width:"100%",boxSizing:"border-box",padding:"12px 14px",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"14px"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:g?"1fr 1fr":"1fr",gap:"14px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",display:"block",marginBottom:"6px"},children:o("manager.modal.status")}),e.jsxs("select",{value:c.status,onChange:t=>F({...c,status:t.target.value}),style:{...x.button,width:"100%",boxSizing:"border-box",padding:"12px 14px",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"14px"},children:[e.jsx("option",{value:"zbierka",children:o("manager.filter.collection")}),e.jsx("option",{value:"predan√°",children:o("manager.filter.sold")})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",display:"block",marginBottom:"6px"},children:o("manager.modal.buyPrice")}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:c.buy,onChange:t=>F({...c,buy:t.target.value}),placeholder:"‚Ç¨",style:{...x.button,width:"100%",boxSizing:"border-box",padding:"12px 14px",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"14px"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:c.status==="predan√°"&&g?"1fr 1fr":"1fr",gap:"14px"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",display:"block",marginBottom:"6px"},children:[o("manager.modal.currentPrice"),n&&n.ebayPriceSource&&e.jsx("span",{style:{marginLeft:"6px",color:"#10b981"},children:"üìä"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:c.current,onChange:t=>F({...c,current:t.target.value}),placeholder:"‚Ç¨",style:{...x.button,width:"100%",boxSizing:"border-box",padding:"12px 14px",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"14px"}})]}),c.status==="predan√°"&&e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#10b981",display:"block",marginBottom:"6px"},children:o("manager.modal.soldPrice")}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:c.soldPrice,onChange:t=>F({...c,soldPrice:t.target.value}),placeholder:c.current||"‚Ç¨",style:{...x.button,width:"100%",boxSizing:"border-box",padding:"12px 14px",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"14px",borderColor:"#10b981"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",display:"block",marginBottom:"6px"},children:o("manager.modal.note")}),e.jsx("input",{type:"text",value:c.note,onChange:t=>F({...c,note:t.target.value}),placeholder:o("manager.modal.notePlaceholder"),style:{...x.button,width:"100%",boxSizing:"border-box",padding:"12px 14px",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"14px"}})]})]})]}),n&&n.priceHistory&&n.priceHistory.length>0&&e.jsx("div",{style:{padding:"0 24px 16px",borderTop:`1px solid ${i?"#334155":"#e2e8f0"}`,marginTop:"0",paddingTop:"16px"},children:e.jsx(Ie,{priceHistory:n.priceHistory,darkMode:i,compact:!0})}),e.jsxs("div",{style:{padding:g?"14px 24px":"12px 16px",borderTop:`1px solid ${i?"#334155":"#e2e8f0"}`,display:"flex",gap:"12px",justifyContent:"flex-end",background:i?"#0f172a":"#f8fafc",borderRadius:"0 0 16px 16px"},children:[e.jsx("button",{type:"button",onClick:()=>s(!1),style:{...x.button,padding:"12px 24px"},children:o("manager.modal.cancel")}),e.jsx("button",{type:"submit",style:{...x.button,...x.primaryButton,padding:"12px 28px"},children:o("manager.modal.save")})]})]})]})}),u&&e.jsx(ut,{user:d,darkMode:i,isMockAuth:!1,mockNotifications:L,onClose:()=>j(!1)}),ke&&e.jsx(mt,{user:{...d,displayName:Z.displayName,photoURL:Z.photoURL},isOpen:ke,isMockAuth:!1,onClose:()=>fe(!1),onUpdate:t=>{Ce(t)}}),Oe&&$&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(15, 23, 42, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"16px"},onClick:()=>ie(!1),children:e.jsxs("div",{style:{background:i?"#1e293b":"white",color:i?"#f8fafc":"#0f172a",borderRadius:"16px",width:"100%",maxWidth:"400px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{padding:"20px",borderBottom:`1px solid ${i?"#334155":"#e2e8f0"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:o("manager.sell.title")}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"13px",color:"#64748b"},children:o("manager.sell.subtitle")})]}),e.jsx("button",{onClick:()=>ie(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:i?"#94a3b8":"#64748b",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px"},children:"‚úï"})]}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{background:i?"#334155":"#f8fafc",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"4px"},children:$.item}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b"},children:[o("manager.sell.buyPrice")," ‚Ç¨",$.buy?.toFixed(2)||"0.00"]}),$.current&&e.jsxs("div",{style:{fontSize:"13px",color:"#64748b"},children:[o("manager.sell.currentValue")," ‚Ç¨",$.current.toFixed(2)]})]}),e.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:i?"#cbd5e1":"#475569",display:"block",marginBottom:"8px"},children:o("manager.sell.priceLabel")}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:O,onChange:t=>he(t.target.value),placeholder:o("manager.sell.pricePlaceholder"),autoFocus:!0,style:{...x.button,width:"100%",boxSizing:"border-box",background:i?"#334155":"#fff",color:i?"#f8fafc":"#0f172a",fontSize:"18px",fontWeight:"600",textAlign:"center",padding:"16px"}}),O&&$.buy&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",borderRadius:"8px",background:parseFloat(O)>=$.buy?"#d1fae5":"#fee2e2",color:parseFloat(O)>=$.buy?"#065f46":"#991b1b",fontSize:"14px",fontWeight:"600",textAlign:"center"},children:[parseFloat(O)>=$.buy?"üìà":"üìâ"," ",o("manager.sell.profitLoss")," ‚Ç¨",(parseFloat(O)-$.buy).toFixed(2),e.jsxs("span",{style:{fontWeight:"400",marginLeft:"8px"},children:["(",((parseFloat(O)-$.buy)/$.buy*100).toFixed(1),"%)"]})]})]}),e.jsxs("div",{style:{padding:"16px 20px",borderTop:`1px solid ${i?"#334155":"#e2e8f0"}`,display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>ie(!1),style:{...x.button,flex:1,background:i?"#334155":"#f1f5f9",color:i?"#f8fafc":"#475569"},children:o("manager.modal.cancel")}),e.jsx("button",{onClick:et,style:{...x.button,flex:1,background:"#10b981",color:"white",border:"1px solid #10b981",fontWeight:"600"},children:o("manager.sell.confirm")})]})]})}),Ye&&K&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(15, 23, 42, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"16px"},onClick:()=>oe(!1),children:e.jsxs("div",{style:{background:i?"#1e293b":"white",color:i?"#f8fafc":"#0f172a",borderRadius:"16px",width:"100%",maxWidth:"400px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{padding:"20px",borderBottom:`1px solid ${i?"#334155":"#e2e8f0"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#ef4444"},children:o("manager.delete.title")}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"13px",color:"#64748b"},children:o("manager.delete.subtitle")})]}),e.jsx("button",{onClick:()=>oe(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:i?"#94a3b8":"#64748b",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px"},children:"‚úï"})]}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{background:i?"#334155":"#fef2f2",borderRadius:"12px",padding:"16px",border:`1px solid ${i?"#475569":"#fecaca"}`},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:K.item}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",display:"flex",gap:"16px",flexWrap:"wrap"},children:[K.buy!=null&&e.jsxs("span",{children:[o("manager.card.buy")," ‚Ç¨",K.buy?.toFixed(2)]}),K.current!=null&&e.jsxs("span",{children:[o("manager.card.current")," ‚Ç¨",K.current?.toFixed(2)]})]})]}),e.jsx("p",{style:{margin:"16px 0 0 0",fontSize:"14px",color:i?"#94a3b8":"#64748b",textAlign:"center"},children:o("manager.delete.warning")})]}),e.jsxs("div",{style:{padding:"16px 20px",borderTop:`1px solid ${i?"#334155":"#e2e8f0"}`,display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>oe(!1),style:{...x.button,flex:1,background:i?"#334155":"#f1f5f9",color:i?"#f8fafc":"#475569"},children:o("manager.modal.cancel")}),e.jsx("button",{onClick:Je,style:{...x.button,flex:1,background:"#ef4444",color:"white",border:"1px solid #ef4444",fontWeight:"600"},children:o("manager.delete.confirm")})]})]})}),ze&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:()=>re(null),children:[e.jsx("button",{onClick:()=>re(null),style:{position:"absolute",top:"20px",right:"20px",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",width:"48px",height:"48px",fontSize:"24px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"‚úï"}),e.jsx("img",{src:ze,alt:"Zv√§ƒç≈°en√Ω obr√°zok",style:{maxWidth:"90vw",maxHeight:"90vh",objectFit:"contain",borderRadius:"8px"},onClick:t=>t.stopPropagation()})]})]})}export{zt as default};
